{"version":3,"file":"vector-wfs-getfeature.js","mappings":"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","sources":["webpack:///../src/ol/format/filter/Filter.js","webpack:///../src/ol/format/filter/LogicalNary.js","webpack:///../src/ol/format/filter/And.js","webpack:///../src/ol/format/filter/Bbox.js","webpack:///../src/ol/format/filter/Comparison.js","webpack:///../src/ol/format/filter/ComparisonBinary.js","webpack:///../src/ol/format/filter/EqualTo.js","webpack:///../src/ol/format/filter/IsLike.js","webpack:///../src/ol/format/filter.js","webpack:///../src/ol/format/GML3.js","webpack:///../src/ol/format/GML32.js","webpack:///../src/ol/format/WFS.js","webpack:///./vector-wfs-getfeature.js"],"sourcesContent":["/**\n * @module ol/format/filter/Filter\n */\n\n/**\n * @classdesc\n * Abstract class; normally only used for creating subclasses and not instantiated in apps.\n * Base class for WFS GetFeature filters.\n *\n * @abstract\n */\nclass Filter {\n  /**\n   * @param {!string} tagName The XML tag name for this filter.\n   */\n  constructor(tagName) {\n    /**\n     * @private\n     * @type {!string}\n     */\n    this.tagName_ = tagName;\n  }\n\n  /**\n   * The XML tag name for a filter.\n   * @return {!string} Name.\n   */\n  getTagName() {\n    return this.tagName_;\n  }\n}\n\nexport default Filter;\n","/**\n * @module ol/format/filter/LogicalNary\n */\nimport {assert} from '../../asserts.js';\nimport Filter from './Filter.js';\n\n/**\n * @classdesc\n * Abstract class; normally only used for creating subclasses and not instantiated in apps.\n * Base class for WFS GetFeature n-ary logical filters.\n *\n * @abstract\n */\nclass LogicalNary extends Filter {\n  /**\n   * @param {!string} tagName The XML tag name for this filter.\n   * @param {Array<import(\"./Filter.js\").default>} conditions Conditions.\n   */\n  constructor(tagName, conditions) {\n    super(tagName);\n\n    /**\n     * @type {Array<import(\"./Filter.js\").default>}\n     */\n    this.conditions = conditions;\n    assert(this.conditions.length >= 2, 'At least 2 conditions are required');\n  }\n}\n\nexport default LogicalNary;\n","/**\n * @module ol/format/filter/And\n */\nimport LogicalNary from './LogicalNary.js';\n\n/**\n * @classdesc\n * Represents a logical `<And>` operator between two or more filter conditions.\n *\n * @abstract\n */\nclass And extends LogicalNary {\n  /**\n   * @param {...import(\"./Filter.js\").default} conditions Conditions.\n   */\n  constructor(conditions) {\n    super('And', Array.prototype.slice.call(arguments));\n  }\n}\n\nexport default And;\n","/**\n * @module ol/format/filter/Bbox\n */\nimport Filter from './Filter.js';\n\n/**\n * @classdesc\n * Represents a `<BBOX>` operator to test whether a geometry-valued property\n * intersects a fixed bounding box\n *\n * @api\n */\nclass Bbox extends Filter {\n  /**\n   * @param {!string} geometryName Geometry name to use.\n   * @param {!import(\"../../extent.js\").Extent} extent Extent.\n   * @param {string} [srsName] SRS name. No srsName attribute will be set\n   * on geometries when this is not provided.\n   */\n  constructor(geometryName, extent, srsName) {\n    super('BBOX');\n\n    /**\n     * @type {!string}\n     */\n    this.geometryName = geometryName;\n\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.extent = extent;\n    if (extent.length !== 4) {\n      throw new Error(\n        'Expected an extent with four values ([minX, minY, maxX, maxY])',\n      );\n    }\n\n    /**\n     * @type {string|undefined}\n     */\n    this.srsName = srsName;\n  }\n}\n\nexport default Bbox;\n","/**\n * @module ol/format/filter/Comparison\n */\nimport Filter from './Filter.js';\n\n/**\n * @classdesc\n * Abstract class; normally only used for creating subclasses and not instantiated in apps.\n * Base class for WFS GetFeature property comparison filters.\n *\n * @abstract\n */\nclass Comparison extends Filter {\n  /**\n   * @param {!string} tagName The XML tag name for this filter.\n   * @param {!string} propertyName Name of the context property to compare.\n   */\n  constructor(tagName, propertyName) {\n    super(tagName);\n\n    /**\n     * @type {!string}\n     */\n    this.propertyName = propertyName;\n  }\n}\n\nexport default Comparison;\n","/**\n * @module ol/format/filter/ComparisonBinary\n */\nimport Comparison from './Comparison.js';\n\n/**\n * @classdesc\n * Abstract class; normally only used for creating subclasses and not instantiated in apps.\n * Base class for WFS GetFeature property binary comparison filters.\n *\n * @abstract\n */\nclass ComparisonBinary extends Comparison {\n  /**\n   * @param {!string} tagName The XML tag name for this filter.\n   * @param {!string} propertyName Name of the context property to compare.\n   * @param {!(string|number)} expression The value to compare.\n   * @param {boolean} [matchCase] Case-sensitive?\n   */\n  constructor(tagName, propertyName, expression, matchCase) {\n    super(tagName, propertyName);\n\n    /**\n     * @type {!(string|number)}\n     */\n    this.expression = expression;\n\n    /**\n     * @type {boolean|undefined}\n     */\n    this.matchCase = matchCase;\n  }\n}\n\nexport default ComparisonBinary;\n","/**\n * @module ol/format/filter/EqualTo\n */\nimport ComparisonBinary from './ComparisonBinary.js';\n\n/**\n * @classdesc\n * Represents a `<PropertyIsEqualTo>` comparison operator.\n * @api\n */\nclass EqualTo extends ComparisonBinary {\n  /**\n   * @param {!string} propertyName Name of the context property to compare.\n   * @param {!(string|number)} expression The value to compare.\n   * @param {boolean} [matchCase] Case-sensitive?\n   */\n  constructor(propertyName, expression, matchCase) {\n    super('PropertyIsEqualTo', propertyName, expression, matchCase);\n  }\n}\n\nexport default EqualTo;\n","/**\n * @module ol/format/filter/IsLike\n */\nimport Comparison from './Comparison.js';\n\n/**\n * @classdesc\n * Represents a `<PropertyIsLike>` comparison operator.\n * @api\n */\nclass IsLike extends Comparison {\n  /**\n   * [constructor description]\n   * @param {!string} propertyName Name of the context property to compare.\n   * @param {!string} pattern Text pattern.\n   * @param {string} [wildCard] Pattern character which matches any sequence of\n   *    zero or more string characters. Default is '*'.\n   * @param {string} [singleChar] pattern character which matches any single\n   *    string character. Default is '.'.\n   * @param {string} [escapeChar] Escape character which can be used to escape\n   *    the pattern characters. Default is '!'.\n   * @param {boolean} [matchCase] Case-sensitive?\n   */\n  constructor(\n    propertyName,\n    pattern,\n    wildCard,\n    singleChar,\n    escapeChar,\n    matchCase,\n  ) {\n    super('PropertyIsLike', propertyName);\n\n    /**\n     * @type {!string}\n     */\n    this.pattern = pattern;\n\n    /**\n     * @type {!string}\n     */\n    this.wildCard = wildCard !== undefined ? wildCard : '*';\n\n    /**\n     * @type {!string}\n     */\n    this.singleChar = singleChar !== undefined ? singleChar : '.';\n\n    /**\n     * @type {!string}\n     */\n    this.escapeChar = escapeChar !== undefined ? escapeChar : '!';\n\n    /**\n     * @type {boolean|undefined}\n     */\n    this.matchCase = matchCase;\n  }\n}\n\nexport default IsLike;\n","/**\n * @module ol/format/filter\n */\nimport And from './filter/And.js';\nimport Bbox from './filter/Bbox.js';\nimport Contains from './filter/Contains.js';\nimport DWithin from './filter/DWithin.js';\nimport Disjoint from './filter/Disjoint.js';\nimport During from './filter/During.js';\nimport EqualTo from './filter/EqualTo.js';\nimport GreaterThan from './filter/GreaterThan.js';\nimport GreaterThanOrEqualTo from './filter/GreaterThanOrEqualTo.js';\nimport Intersects from './filter/Intersects.js';\nimport IsBetween from './filter/IsBetween.js';\nimport IsLike from './filter/IsLike.js';\nimport IsNull from './filter/IsNull.js';\nimport LessThan from './filter/LessThan.js';\nimport LessThanOrEqualTo from './filter/LessThanOrEqualTo.js';\nimport Not from './filter/Not.js';\nimport NotEqualTo from './filter/NotEqualTo.js';\nimport Or from './filter/Or.js';\nimport ResourceId from './filter/ResourceId.js';\nimport Within from './filter/Within.js';\n\n/**\n * Create a logical `<And>` operator between two or more filter conditions.\n *\n * @param {...import(\"./filter/Filter.js\").default} conditions Filter conditions.\n * @return {!And} `<And>` operator.\n * @api\n */\nexport function and(conditions) {\n  const params = [null].concat(Array.prototype.slice.call(arguments));\n  return new (Function.prototype.bind.apply(And, params))();\n}\n\n/**\n * Create a logical `<Or>` operator between two or more filter conditions.\n *\n * @param {...import(\"./filter/Filter.js\").default} conditions Filter conditions.\n * @return {!Or} `<Or>` operator.\n * @api\n */\nexport function or(conditions) {\n  const params = [null].concat(Array.prototype.slice.call(arguments));\n  return new (Function.prototype.bind.apply(Or, params))();\n}\n\n/**\n * Represents a logical `<Not>` operator for a filter condition.\n *\n * @param {!import(\"./filter/Filter.js\").default} condition Filter condition.\n * @return {!Not} `<Not>` operator.\n * @api\n */\nexport function not(condition) {\n  return new Not(condition);\n}\n\n/**\n * Create a `<BBOX>` operator to test whether a geometry-valued property\n * intersects a fixed bounding box\n *\n * @param {!string} geometryName Geometry name to use.\n * @param {!import(\"../extent.js\").Extent} extent Extent.\n * @param {string} [srsName] SRS name. No srsName attribute will be\n *    set on geometries when this is not provided.\n * @return {!Bbox} `<BBOX>` operator.\n * @api\n */\nexport function bbox(geometryName, extent, srsName) {\n  return new Bbox(geometryName, extent, srsName);\n}\n\n/**\n * Create a `<Contains>` operator to test whether a geometry-valued property\n * contains a given geometry.\n *\n * @param {!string} geometryName Geometry name to use.\n * @param {!import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {string} [srsName] SRS name. No srsName attribute will be\n *    set on geometries when this is not provided.\n * @return {!Contains} `<Contains>` operator.\n * @api\n */\nexport function contains(geometryName, geometry, srsName) {\n  return new Contains(geometryName, geometry, srsName);\n}\n\n/**\n * Create a `<Intersects>` operator to test whether a geometry-valued property\n * intersects a given geometry.\n *\n * @param {!string} geometryName Geometry name to use.\n * @param {!import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {string} [srsName] SRS name. No srsName attribute will be\n *    set on geometries when this is not provided.\n * @return {!Intersects} `<Intersects>` operator.\n * @api\n */\nexport function intersects(geometryName, geometry, srsName) {\n  return new Intersects(geometryName, geometry, srsName);\n}\n\n/**\n * Create a `<Disjoint>` operator to test whether a geometry-valued property\n * is disjoint to a given geometry.\n *\n * @param {!string} geometryName Geometry name to use.\n * @param {!import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {string} [srsName] SRS name. No srsName attribute will be\n *    set on geometries when this is not provided.\n * @return {!Disjoint} `<Disjoint>` operator.\n * @api\n */\nexport function disjoint(geometryName, geometry, srsName) {\n  return new Disjoint(geometryName, geometry, srsName);\n}\n\n/**\n * Create a `<Within>` operator to test whether a geometry-valued property\n * is within a given geometry.\n *\n * @param {!string} geometryName Geometry name to use.\n * @param {!import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {string} [srsName] SRS name. No srsName attribute will be\n *    set on geometries when this is not provided.\n * @return {!Within} `<Within>` operator.\n * @api\n */\nexport function within(geometryName, geometry, srsName) {\n  return new Within(geometryName, geometry, srsName);\n}\n\n/**\n * Create a `<DWithin>` operator to test whether a geometry-valued property\n * is within a distance to a given geometry.\n *\n * @param {!string} geometryName Geometry name to use.\n * @param {!import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {!number} distance Distance.\n * @param {!string} unit Unit.\n * @param {string} [srsName] SRS name. No srsName attribute will be\n *    set on geometries when this is not provided.\n * @return {!DWithin} `<DWithin>` operator.\n * @api\n */\nexport function dwithin(geometryName, geometry, distance, unit, srsName) {\n  return new DWithin(geometryName, geometry, distance, unit, srsName);\n}\n\n/**\n * Creates a `<PropertyIsEqualTo>` comparison operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!(string|number)} expression The value to compare.\n * @param {boolean} [matchCase] Case-sensitive?\n * @return {!EqualTo} `<PropertyIsEqualTo>` operator.\n * @api\n */\nexport function equalTo(propertyName, expression, matchCase) {\n  return new EqualTo(propertyName, expression, matchCase);\n}\n\n/**\n * Creates a `<PropertyIsNotEqualTo>` comparison operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!(string|number)} expression The value to compare.\n * @param {boolean} [matchCase] Case-sensitive?\n * @return {!NotEqualTo} `<PropertyIsNotEqualTo>` operator.\n * @api\n */\nexport function notEqualTo(propertyName, expression, matchCase) {\n  return new NotEqualTo(propertyName, expression, matchCase);\n}\n\n/**\n * Creates a `<PropertyIsLessThan>` comparison operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!number} expression The value to compare.\n * @return {!LessThan} `<PropertyIsLessThan>` operator.\n * @api\n */\nexport function lessThan(propertyName, expression) {\n  return new LessThan(propertyName, expression);\n}\n\n/**\n * Creates a `<PropertyIsLessThanOrEqualTo>` comparison operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!number} expression The value to compare.\n * @return {!LessThanOrEqualTo} `<PropertyIsLessThanOrEqualTo>` operator.\n * @api\n */\nexport function lessThanOrEqualTo(propertyName, expression) {\n  return new LessThanOrEqualTo(propertyName, expression);\n}\n\n/**\n * Creates a `<PropertyIsGreaterThan>` comparison operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!number} expression The value to compare.\n * @return {!GreaterThan} `<PropertyIsGreaterThan>` operator.\n * @api\n */\nexport function greaterThan(propertyName, expression) {\n  return new GreaterThan(propertyName, expression);\n}\n\n/**\n * Creates a `<PropertyIsGreaterThanOrEqualTo>` comparison operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!number} expression The value to compare.\n * @return {!GreaterThanOrEqualTo} `<PropertyIsGreaterThanOrEqualTo>` operator.\n * @api\n */\nexport function greaterThanOrEqualTo(propertyName, expression) {\n  return new GreaterThanOrEqualTo(propertyName, expression);\n}\n\n/**\n * Creates a `<PropertyIsNull>` comparison operator to test whether a property value\n * is null.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @return {!IsNull} `<PropertyIsNull>` operator.\n * @api\n */\nexport function isNull(propertyName) {\n  return new IsNull(propertyName);\n}\n\n/**\n * Creates a `<PropertyIsBetween>` comparison operator to test whether an expression\n * value lies within a range given by a lower and upper bound (inclusive).\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!number} lowerBoundary The lower bound of the range.\n * @param {!number} upperBoundary The upper bound of the range.\n * @return {!IsBetween} `<PropertyIsBetween>` operator.\n * @api\n */\nexport function between(propertyName, lowerBoundary, upperBoundary) {\n  return new IsBetween(propertyName, lowerBoundary, upperBoundary);\n}\n\n/**\n * Represents a `<PropertyIsLike>` comparison operator that matches a string property\n * value against a text pattern.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!string} pattern Text pattern.\n * @param {string} [wildCard] Pattern character which matches any sequence of\n *    zero or more string characters. Default is '*'.\n * @param {string} [singleChar] pattern character which matches any single\n *    string character. Default is '.'.\n * @param {string} [escapeChar] Escape character which can be used to escape\n *    the pattern characters. Default is '!'.\n * @param {boolean} [matchCase] Case-sensitive?\n * @return {!IsLike} `<PropertyIsLike>` operator.\n * @api\n */\nexport function like(\n  propertyName,\n  pattern,\n  wildCard,\n  singleChar,\n  escapeChar,\n  matchCase,\n) {\n  return new IsLike(\n    propertyName,\n    pattern,\n    wildCard,\n    singleChar,\n    escapeChar,\n    matchCase,\n  );\n}\n\n/**\n * Create a `<During>` temporal operator.\n *\n * @param {!string} propertyName Name of the context property to compare.\n * @param {!string} begin The begin date in ISO-8601 format.\n * @param {!string} end The end date in ISO-8601 format.\n * @return {!During} `<During>` operator.\n * @api\n */\nexport function during(propertyName, begin, end) {\n  return new During(propertyName, begin, end);\n}\n\nexport function resourceId(rid) {\n  return new ResourceId(rid);\n}\n","/**\n * @module ol/format/GML3\n */\nimport {extend} from '../array.js';\nimport {createOrUpdate} from '../extent.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Polygon from '../geom/Polygon.js';\nimport {get as getProjection} from '../proj.js';\nimport {\n  OBJECT_PROPERTY_NODE_FACTORY,\n  XML_SCHEMA_INSTANCE_URI,\n  createElementNS,\n  getAllTextContent,\n  makeArrayExtender,\n  makeArrayPusher,\n  makeChildAppender,\n  makeReplacer,\n  makeSimpleNodeFactory,\n  parseNode,\n  pushParseAndPop,\n  pushSerializeAndPop,\n} from '../xml.js';\nimport {\n  transformExtentWithOptions,\n  transformGeometryWithOptions,\n} from './Feature.js';\nimport GML2 from './GML2.js';\nimport GMLBase, {GMLNS} from './GMLBase.js';\nimport {readNonNegativeIntegerString, writeStringTextNode} from './xsd.js';\n\n/**\n * @const\n * @type {string}\n * @private\n */\nconst schemaLocation =\n  GMLNS +\n  ' http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/' +\n  '1.0.0/gmlsf.xsd';\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst MULTIGEOMETRY_TO_MEMBER_NODENAME = {\n  'MultiLineString': 'lineStringMember',\n  'MultiCurve': 'curveMember',\n  'MultiPolygon': 'polygonMember',\n  'MultiSurface': 'surfaceMember',\n};\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GML format\n * version 3.1.1.\n * Currently only supports GML 3.1.1 Simple Features profile.\n *\n * @api\n */\nclass GML3 extends GMLBase {\n  /**\n   * @param {import(\"./GMLBase.js\").Options} [options] Optional configuration object.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super(options);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.surface_ = options.surface !== undefined ? options.surface : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.curve_ = options.curve !== undefined ? options.curve : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.multiCurve_ =\n      options.multiCurve !== undefined ? options.multiCurve : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.multiSurface_ =\n      options.multiSurface !== undefined ? options.multiSurface : true;\n\n    /**\n     * @type {string}\n     */\n    this.schemaLocation = options.schemaLocation\n      ? options.schemaLocation\n      : schemaLocation;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hasZ = options.hasZ !== undefined ? options.hasZ : false;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {MultiLineString|undefined} MultiLineString.\n   */\n  readMultiCurve(node, objectStack) {\n    /** @type {Array<LineString>} */\n    const lineStrings = pushParseAndPop(\n      [],\n      this.MULTICURVE_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    if (lineStrings) {\n      const multiLineString = new MultiLineString(lineStrings);\n      return multiLineString;\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<number>|undefined} Polygon.\n   */\n  readFlatCurveRing(node, objectStack) {\n    /** @type {Array<LineString>} */\n    const lineStrings = pushParseAndPop(\n      [],\n      this.MULTICURVE_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    const flatCoordinates = [];\n    for (let i = 0, ii = lineStrings.length; i < ii; ++i) {\n      extend(flatCoordinates, lineStrings[i].getFlatCoordinates());\n    }\n    return flatCoordinates;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {MultiPolygon|undefined} MultiPolygon.\n   */\n  readMultiSurface(node, objectStack) {\n    /** @type {Array<Polygon>} */\n    const polygons = pushParseAndPop(\n      [],\n      this.MULTISURFACE_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    if (polygons) {\n      return new MultiPolygon(polygons);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   */\n  curveMemberParser(node, objectStack) {\n    parseNode(this.CURVEMEMBER_PARSERS, node, objectStack, this);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   */\n  surfaceMemberParser(node, objectStack) {\n    parseNode(this.SURFACEMEMBER_PARSERS, node, objectStack, this);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<(Array<number>)>|undefined} flat coordinates.\n   */\n  readPatch(node, objectStack) {\n    return pushParseAndPop(\n      [null],\n      this.PATCHES_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<number>|undefined} flat coordinates.\n   */\n  readSegment(node, objectStack) {\n    return pushParseAndPop([], this.SEGMENTS_PARSERS, node, objectStack, this);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<(Array<number>)>|undefined} flat coordinates.\n   */\n  readPolygonPatch(node, objectStack) {\n    return pushParseAndPop(\n      [null],\n      this.FLAT_LINEAR_RINGS_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<number>|undefined} flat coordinates.\n   */\n  readLineStringSegment(node, objectStack) {\n    return pushParseAndPop(\n      [null],\n      this.GEOMETRY_FLAT_COORDINATES_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   */\n  interiorParser(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    const flatLinearRing = pushParseAndPop(\n      undefined,\n      this.RING_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    if (flatLinearRing) {\n      const flatLinearRings =\n        /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n      flatLinearRings.push(flatLinearRing);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   */\n  exteriorParser(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    const flatLinearRing = pushParseAndPop(\n      undefined,\n      this.RING_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    if (flatLinearRing) {\n      const flatLinearRings =\n        /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n      flatLinearRings[0] = flatLinearRing;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Polygon|undefined} Polygon.\n   */\n  readSurface(node, objectStack) {\n    /** @type {Array<Array<number>>} */\n    const flatLinearRings = pushParseAndPop(\n      [null],\n      this.SURFACE_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    if (flatLinearRings && flatLinearRings[0]) {\n      const flatCoordinates = flatLinearRings[0];\n      const ends = [flatCoordinates.length];\n      let i, ii;\n      for (i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n        extend(flatCoordinates, flatLinearRings[i]);\n        ends.push(flatCoordinates.length);\n      }\n      return new Polygon(flatCoordinates, 'XYZ', ends);\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {LineString|undefined} LineString.\n   */\n  readCurve(node, objectStack) {\n    /** @type {Array<number>} */\n    const flatCoordinates = pushParseAndPop(\n      [null],\n      this.CURVE_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    if (flatCoordinates) {\n      const lineString = new LineString(flatCoordinates, 'XYZ');\n      return lineString;\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {import(\"../extent.js\").Extent|undefined} Envelope.\n   */\n  readEnvelope(node, objectStack) {\n    /** @type {Array<number>} */\n    const flatCoordinates = pushParseAndPop(\n      [null],\n      this.ENVELOPE_PARSERS,\n      node,\n      objectStack,\n      this,\n    );\n    return createOrUpdate(\n      flatCoordinates[1][0],\n      flatCoordinates[1][1],\n      flatCoordinates[2][0],\n      flatCoordinates[2][1],\n    );\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<number>|undefined} Flat coordinates.\n   */\n  readFlatPos(node, objectStack) {\n    let s = getAllTextContent(node, false);\n    const re = /^\\s*([+\\-]?\\d*\\.?\\d+(?:[eE][+\\-]?\\d+)?)\\s*/;\n    /** @type {Array<number>} */\n    const flatCoordinates = [];\n    let m;\n    while ((m = re.exec(s))) {\n      flatCoordinates.push(parseFloat(m[1]));\n      s = s.substr(m[0].length);\n    }\n    if (s !== '') {\n      return undefined;\n    }\n    const context = objectStack[0];\n    const containerSrs = context['srsName'];\n    const axisOrientation = containerSrs\n      ? getProjection(containerSrs).getAxisOrientation()\n      : 'enu';\n    if (axisOrientation === 'neu') {\n      for (let i = 0, ii = flatCoordinates.length; i < ii; i += 3) {\n        const y = flatCoordinates[i];\n        const x = flatCoordinates[i + 1];\n        flatCoordinates[i] = x;\n        flatCoordinates[i + 1] = y;\n      }\n    }\n    const len = flatCoordinates.length;\n    if (len == 2) {\n      flatCoordinates.push(0);\n    }\n    if (len === 0) {\n      return undefined;\n    }\n    return flatCoordinates;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<number>|undefined} Flat coordinates.\n   */\n  readFlatPosList(node, objectStack) {\n    const s = getAllTextContent(node, false).replace(/^\\s*|\\s*$/g, '');\n    const context = objectStack[0];\n    const containerSrs = context['srsName'];\n    const contextDimension = context['srsDimension'];\n    const axisOrientation = containerSrs\n      ? getProjection(containerSrs).getAxisOrientation()\n      : 'enu';\n    const coords = s.split(/\\s+/);\n    // The \"dimension\" attribute is from the GML 3.0.1 spec.\n    let dim = 2;\n    if (node.getAttribute('srsDimension')) {\n      dim = readNonNegativeIntegerString(node.getAttribute('srsDimension'));\n    } else if (node.getAttribute('dimension')) {\n      dim = readNonNegativeIntegerString(node.getAttribute('dimension'));\n    } else if (\n      /** @type {Element} */ (node.parentNode).getAttribute('srsDimension')\n    ) {\n      dim = readNonNegativeIntegerString(\n        /** @type {Element} */ (node.parentNode).getAttribute('srsDimension'),\n      );\n    } else if (contextDimension) {\n      dim = readNonNegativeIntegerString(contextDimension);\n    }\n    const asXYZ = axisOrientation.startsWith('en');\n    let x, y, z;\n    const flatCoordinates = [];\n    for (let i = 0, ii = coords.length; i < ii; i += dim) {\n      x = parseFloat(coords[i]);\n      y = parseFloat(coords[i + 1]);\n      z = dim === 3 ? parseFloat(coords[i + 2]) : 0;\n      if (asXYZ) {\n        flatCoordinates.push(x, y, z);\n      } else {\n        flatCoordinates.push(y, x, z);\n      }\n    }\n    return flatCoordinates;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/Point.js\").default} value Point geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writePos_(node, value, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsDimension = hasZ ? '3' : '2';\n    node.setAttribute('srsDimension', srsDimension);\n    const srsName = context['srsName'];\n    const axisOrientation = srsName\n      ? getProjection(srsName).getAxisOrientation()\n      : 'enu';\n    const point = value.getCoordinates();\n    // only 2d for simple features profile\n    let coords = axisOrientation.startsWith('en')\n      ? point[0] + ' ' + point[1]\n      : point[1] + ' ' + point[0];\n    if (hasZ) {\n      // For newly created points, Z can be undefined.\n      const z = point[2] || 0;\n      coords += ' ' + z;\n    }\n    writeStringTextNode(node, coords);\n  }\n\n  /**\n   * @param {Array<number>} point Point geometry.\n   * @param {string} [srsName] Optional srsName\n   * @param {boolean} [hasZ] whether the geometry has a Z coordinate (is 3D) or not.\n   * @return {string} The coords string.\n   * @private\n   */\n  getCoords_(point, srsName, hasZ) {\n    const axisOrientation = srsName\n      ? getProjection(srsName).getAxisOrientation()\n      : 'enu';\n    let coords = axisOrientation.startsWith('en')\n      ? point[0] + ' ' + point[1]\n      : point[1] + ' ' + point[0];\n    if (hasZ) {\n      // For newly created points, Z can be undefined.\n      const z = point[2] || 0;\n      coords += ' ' + z;\n    }\n\n    return coords;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {LineString|import(\"../geom/LinearRing.js\").default} value Geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writePosList_(node, value, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsDimension = hasZ ? '3' : '2';\n    node.setAttribute('srsDimension', srsDimension);\n    const srsName = context['srsName'];\n    // only 2d for simple features profile\n    const points = value.getCoordinates();\n    const len = points.length;\n    const parts = new Array(len);\n    let point;\n    for (let i = 0; i < len; ++i) {\n      point = points[i];\n      parts[i] = this.getCoords_(point, srsName, hasZ);\n    }\n    writeStringTextNode(node, parts.join(' '));\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/Point.js\").default} geometry Point geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writePoint(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const pos = createElementNS(node.namespaceURI, 'pos');\n    node.appendChild(pos);\n    this.writePos_(pos, geometry, objectStack);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeEnvelope(node, extent, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const keys = ['lowerCorner', 'upperCorner'];\n    const values = [extent[0] + ' ' + extent[1], extent[2] + ' ' + extent[3]];\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: node}),\n      this.ENVELOPE_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY,\n      values,\n      objectStack,\n      keys,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/LinearRing.js\").default} geometry LinearRing geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeLinearRing(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const posList = createElementNS(node.namespaceURI, 'posList');\n    node.appendChild(posList);\n    this.writePosList_(posList, geometry, objectStack);\n  }\n\n  /**\n   * @param {*} value Value.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {string} [nodeName] Node name.\n   * @return {Node} Node.\n   * @private\n   */\n  RING_NODE_FACTORY_(value, objectStack, nodeName) {\n    const context = objectStack[objectStack.length - 1];\n    const parentNode = context.node;\n    const exteriorWritten = context['exteriorWritten'];\n    if (exteriorWritten === undefined) {\n      context['exteriorWritten'] = true;\n    }\n    return createElementNS(\n      parentNode.namespaceURI,\n      exteriorWritten !== undefined ? 'interior' : 'exterior',\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Polygon} geometry Polygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeSurfaceOrPolygon(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    if (node.nodeName !== 'PolygonPatch' && srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    if (node.nodeName === 'Polygon' || node.nodeName === 'PolygonPatch') {\n      const rings = geometry.getLinearRings();\n      pushSerializeAndPop(\n        {node: node, hasZ: hasZ, srsName: srsName},\n        this.RING_SERIALIZERS,\n        this.RING_NODE_FACTORY_,\n        rings,\n        objectStack,\n        undefined,\n        this,\n      );\n    } else if (node.nodeName === 'Surface') {\n      const patches = createElementNS(node.namespaceURI, 'patches');\n      node.appendChild(patches);\n      this.writeSurfacePatches_(patches, geometry, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {LineString} geometry LineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeCurveOrLineString(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (node.nodeName !== 'LineStringSegment' && srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    if (\n      node.nodeName === 'LineString' ||\n      node.nodeName === 'LineStringSegment'\n    ) {\n      const posList = createElementNS(node.namespaceURI, 'posList');\n      node.appendChild(posList);\n      this.writePosList_(posList, geometry, objectStack);\n    } else if (node.nodeName === 'Curve') {\n      const segments = createElementNS(node.namespaceURI, 'segments');\n      node.appendChild(segments);\n      this.writeCurveSegments_(segments, geometry, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {MultiPolygon} geometry MultiPolygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeMultiSurfaceOrPolygon(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    const surface = context['surface'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const polygons = geometry.getPolygons();\n    pushSerializeAndPop(\n      {node: node, hasZ: hasZ, srsName: srsName, surface: surface},\n      this.SURFACEORPOLYGONMEMBER_SERIALIZERS,\n      this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,\n      polygons,\n      objectStack,\n      undefined,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/MultiPoint.js\").default} geometry MultiPoint geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeMultiPoint(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    const hasZ = context['hasZ'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const points = geometry.getPoints();\n    pushSerializeAndPop(\n      {node: node, hasZ: hasZ, srsName: srsName},\n      this.POINTMEMBER_SERIALIZERS,\n      makeSimpleNodeFactory('pointMember'),\n      points,\n      objectStack,\n      undefined,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {MultiLineString} geometry MultiLineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeMultiCurveOrLineString(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    const curve = context['curve'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const lines = geometry.getLineStrings();\n    pushSerializeAndPop(\n      {node: node, hasZ: hasZ, srsName: srsName, curve: curve},\n      this.LINESTRINGORCURVEMEMBER_SERIALIZERS,\n      this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,\n      lines,\n      objectStack,\n      undefined,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/LinearRing.js\").default} ring LinearRing geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeRing(node, ring, objectStack) {\n    const linearRing = createElementNS(node.namespaceURI, 'LinearRing');\n    node.appendChild(linearRing);\n    this.writeLinearRing(linearRing, ring, objectStack);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Polygon} polygon Polygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeSurfaceOrPolygonMember(node, polygon, objectStack) {\n    const child = this.GEOMETRY_NODE_FACTORY_(polygon, objectStack);\n    if (child) {\n      node.appendChild(child);\n      this.writeSurfaceOrPolygon(child, polygon, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/Point.js\").default} point Point geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writePointMember(node, point, objectStack) {\n    const child = createElementNS(node.namespaceURI, 'Point');\n    node.appendChild(child);\n    this.writePoint(child, point, objectStack);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {LineString} line LineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeLineStringOrCurveMember(node, line, objectStack) {\n    const child = this.GEOMETRY_NODE_FACTORY_(line, objectStack);\n    if (child) {\n      node.appendChild(child);\n      this.writeCurveOrLineString(child, line, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Polygon} polygon Polygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeSurfacePatches_(node, polygon, objectStack) {\n    const child = createElementNS(node.namespaceURI, 'PolygonPatch');\n    node.appendChild(child);\n    this.writeSurfaceOrPolygon(child, polygon, objectStack);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {LineString} line LineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeCurveSegments_(node, line, objectStack) {\n    const child = createElementNS(node.namespaceURI, 'LineStringSegment');\n    node.appendChild(child);\n    this.writeCurveOrLineString(child, line, objectStack);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} geometry Geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeGeometryElement(node, geometry, objectStack) {\n    const context = /** @type {import(\"./Feature.js\").WriteOptions} */ (\n      objectStack[objectStack.length - 1]\n    );\n    const item = Object.assign({}, context);\n    item['node'] = node;\n    let value;\n    if (Array.isArray(geometry)) {\n      value = transformExtentWithOptions(\n        /** @type {import(\"../extent.js\").Extent} */ (geometry),\n        context,\n      );\n    } else {\n      value = transformGeometryWithOptions(\n        /** @type {import(\"../geom/Geometry.js\").default} */ (geometry),\n        true,\n        context,\n      );\n    }\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */\n      (item),\n      this.GEOMETRY_SERIALIZERS,\n      this.GEOMETRY_NODE_FACTORY_,\n      [value],\n      objectStack,\n      undefined,\n      this,\n    );\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeFeatureElement(node, feature, objectStack) {\n    const fid = feature.getId();\n    if (fid) {\n      node.setAttribute('fid', /** @type {string} */ (fid));\n    }\n    const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    const featureNS = context['featureNS'];\n    const geometryName = feature.getGeometryName();\n    if (!context.serializers) {\n      context.serializers = {};\n      context.serializers[featureNS] = {};\n    }\n    const keys = [];\n    const values = [];\n    if (feature.hasProperties()) {\n      const properties = feature.getProperties();\n      for (const key in properties) {\n        const value = properties[key];\n        if (value !== null && value !== undefined) {\n          keys.push(key);\n          values.push(value);\n          if (\n            key == geometryName ||\n            typeof (/** @type {?} */ (value).getSimplifiedGeometry) ===\n              'function'\n          ) {\n            if (!(key in context.serializers[featureNS])) {\n              context.serializers[featureNS][key] = makeChildAppender(\n                this.writeGeometryElement,\n                this,\n              );\n            }\n          } else {\n            if (!(key in context.serializers[featureNS])) {\n              context.serializers[featureNS][key] =\n                makeChildAppender(writeStringTextNode);\n            }\n          }\n        }\n      }\n    }\n    const item = Object.assign({}, context);\n    item.node = node;\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */\n      (item),\n      context.serializers,\n      makeSimpleNodeFactory(undefined, featureNS),\n      values,\n      objectStack,\n      keys,\n    );\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeFeatureMembers_(node, features, objectStack) {\n    const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    const featureType = context['featureType'];\n    const featureNS = context['featureNS'];\n    /** @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>} */\n    const serializers = {};\n    serializers[featureNS] = {};\n    serializers[featureNS][featureType] = makeChildAppender(\n      this.writeFeatureElement,\n      this,\n    );\n    const item = Object.assign({}, context);\n    item.node = node;\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */\n      (item),\n      serializers,\n      makeSimpleNodeFactory(featureType, featureNS),\n      features,\n      objectStack,\n    );\n  }\n\n  /**\n   * @const\n   * @param {*} value Value.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {string} [nodeName] Node name.\n   * @return {Node|undefined} Node.\n   * @private\n   */\n  MULTIGEOMETRY_MEMBER_NODE_FACTORY_(value, objectStack, nodeName) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(\n      this.namespace,\n      MULTIGEOMETRY_TO_MEMBER_NODENAME[parentNode.nodeName],\n    );\n  }\n\n  /**\n   * @const\n   * @param {*} value Value.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {string} [nodeName] Node name.\n   * @return {Element|undefined} Node.\n   * @private\n   */\n  GEOMETRY_NODE_FACTORY_(value, objectStack, nodeName) {\n    const context = objectStack[objectStack.length - 1];\n    const multiSurface = context['multiSurface'];\n    const surface = context['surface'];\n    const curve = context['curve'];\n    const multiCurve = context['multiCurve'];\n    if (!Array.isArray(value)) {\n      nodeName = /** @type {import(\"../geom/Geometry.js\").default} */ (\n        value\n      ).getType();\n      if (nodeName === 'MultiPolygon' && multiSurface === true) {\n        nodeName = 'MultiSurface';\n      } else if (nodeName === 'Polygon' && surface === true) {\n        nodeName = 'Surface';\n      } else if (nodeName === 'LineString' && curve === true) {\n        nodeName = 'Curve';\n      } else if (nodeName === 'MultiLineString' && multiCurve === true) {\n        nodeName = 'MultiCurve';\n      }\n    } else {\n      nodeName = 'Envelope';\n    }\n    return createElementNS(this.namespace, nodeName);\n  }\n\n  /**\n   * Encode a geometry in GML 3.1.1 Simple Features.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Options.\n   * @return {Node} Node.\n   * @api\n   * @override\n   */\n  writeGeometryNode(geometry, options) {\n    options = this.adaptOptions(options);\n    const geom = createElementNS(this.namespace, 'geom');\n    const context = {\n      node: geom,\n      hasZ: this.hasZ,\n      srsName: this.srsName,\n      curve: this.curve_,\n      surface: this.surface_,\n      multiSurface: this.multiSurface_,\n      multiCurve: this.multiCurve_,\n    };\n    if (options) {\n      Object.assign(context, options);\n    }\n    this.writeGeometryElement(geom, geometry, [context]);\n    return geom;\n  }\n\n  /**\n   * Encode an array of features in the GML 3.1.1 format as an XML node.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Options.\n   * @return {Element} Node.\n   * @api\n   * @override\n   */\n  writeFeaturesNode(features, options) {\n    options = this.adaptOptions(options);\n    const node = createElementNS(this.namespace, 'featureMembers');\n    node.setAttributeNS(\n      XML_SCHEMA_INSTANCE_URI,\n      'xsi:schemaLocation',\n      this.schemaLocation,\n    );\n    const context = {\n      srsName: this.srsName,\n      hasZ: this.hasZ,\n      curve: this.curve_,\n      surface: this.surface_,\n      multiSurface: this.multiSurface_,\n      multiCurve: this.multiCurve_,\n      featureNS: this.featureNS,\n      featureType: this.featureType,\n    };\n    if (options) {\n      Object.assign(context, options);\n    }\n    this.writeFeatureMembers_(node, features, [context]);\n    return node;\n  }\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'pos': makeReplacer(GML3.prototype.readFlatPos),\n    'posList': makeReplacer(GML3.prototype.readFlatPosList),\n    'coordinates': makeReplacer(GML2.prototype.readFlatCoordinates),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.FLAT_LINEAR_RINGS_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'interior': GML3.prototype.interiorParser,\n    'exterior': GML3.prototype.exteriorParser,\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.GEOMETRY_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'Point': makeReplacer(GMLBase.prototype.readPoint),\n    'MultiPoint': makeReplacer(GMLBase.prototype.readMultiPoint),\n    'LineString': makeReplacer(GMLBase.prototype.readLineString),\n    'MultiLineString': makeReplacer(GMLBase.prototype.readMultiLineString),\n    'LinearRing': makeReplacer(GMLBase.prototype.readLinearRing),\n    'Polygon': makeReplacer(GMLBase.prototype.readPolygon),\n    'MultiPolygon': makeReplacer(GMLBase.prototype.readMultiPolygon),\n    'Surface': makeReplacer(GML3.prototype.readSurface),\n    'MultiSurface': makeReplacer(GML3.prototype.readMultiSurface),\n    'Curve': makeReplacer(GML3.prototype.readCurve),\n    'MultiCurve': makeReplacer(GML3.prototype.readMultiCurve),\n    'Envelope': makeReplacer(GML3.prototype.readEnvelope),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.MULTICURVE_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'curveMember': makeArrayPusher(GML3.prototype.curveMemberParser),\n    'curveMembers': makeArrayPusher(GML3.prototype.curveMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.MULTISURFACE_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'surfaceMember': makeArrayPusher(GML3.prototype.surfaceMemberParser),\n    'surfaceMembers': makeArrayPusher(GML3.prototype.surfaceMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.CURVEMEMBER_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString),\n    'Curve': makeArrayPusher(GML3.prototype.readCurve),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.SURFACEMEMBER_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon),\n    'Surface': makeArrayPusher(GML3.prototype.readSurface),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.SURFACE_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'patches': makeReplacer(GML3.prototype.readPatch),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.CURVE_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'segments': makeReplacer(GML3.prototype.readSegment),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.ENVELOPE_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'lowerCorner': makeArrayPusher(GML3.prototype.readFlatPosList),\n    'upperCorner': makeArrayPusher(GML3.prototype.readFlatPosList),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.PATCHES_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'PolygonPatch': makeReplacer(GML3.prototype.readPolygonPatch),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML3.prototype.SEGMENTS_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'LineStringSegment': makeArrayExtender(\n      GML3.prototype.readLineStringSegment,\n    ),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGMLBase.prototype.RING_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'LinearRing': makeReplacer(GMLBase.prototype.readFlatLinearRing),\n    'Ring': makeReplacer(GML3.prototype.readFlatCurveRing),\n  },\n};\n\n/**\n * Encode an array of features in GML 3.1.1 Simple Features.\n *\n * @function\n * @param {Array<import(\"../Feature.js\").default>} features Features.\n * @param {import(\"./Feature.js\").WriteOptions} [options] Options.\n * @return {string} Result.\n * @api\n */\nGML3.prototype.writeFeatures;\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML3.prototype.RING_SERIALIZERS = {\n  'http://www.opengis.net/gml': {\n    'exterior': makeChildAppender(GML3.prototype.writeRing),\n    'interior': makeChildAppender(GML3.prototype.writeRing),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML3.prototype.ENVELOPE_SERIALIZERS = {\n  'http://www.opengis.net/gml': {\n    'lowerCorner': makeChildAppender(writeStringTextNode),\n    'upperCorner': makeChildAppender(writeStringTextNode),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML3.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml': {\n    'surfaceMember': makeChildAppender(\n      GML3.prototype.writeSurfaceOrPolygonMember,\n    ),\n    'polygonMember': makeChildAppender(\n      GML3.prototype.writeSurfaceOrPolygonMember,\n    ),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML3.prototype.POINTMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml': {\n    'pointMember': makeChildAppender(GML3.prototype.writePointMember),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML3.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml': {\n    'lineStringMember': makeChildAppender(\n      GML3.prototype.writeLineStringOrCurveMember,\n    ),\n    'curveMember': makeChildAppender(\n      GML3.prototype.writeLineStringOrCurveMember,\n    ),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML3.prototype.GEOMETRY_SERIALIZERS = {\n  'http://www.opengis.net/gml': {\n    'Curve': makeChildAppender(GML3.prototype.writeCurveOrLineString),\n    'MultiCurve': makeChildAppender(GML3.prototype.writeMultiCurveOrLineString),\n    'Point': makeChildAppender(GML3.prototype.writePoint),\n    'MultiPoint': makeChildAppender(GML3.prototype.writeMultiPoint),\n    'LineString': makeChildAppender(GML3.prototype.writeCurveOrLineString),\n    'MultiLineString': makeChildAppender(\n      GML3.prototype.writeMultiCurveOrLineString,\n    ),\n    'LinearRing': makeChildAppender(GML3.prototype.writeLinearRing),\n    'Polygon': makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),\n    'MultiPolygon': makeChildAppender(\n      GML3.prototype.writeMultiSurfaceOrPolygon,\n    ),\n    'Surface': makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),\n    'MultiSurface': makeChildAppender(\n      GML3.prototype.writeMultiSurfaceOrPolygon,\n    ),\n    'Envelope': makeChildAppender(GML3.prototype.writeEnvelope),\n  },\n};\n\nexport default GML3;\n","/**\n * @module ol/format/GML32\n */\nimport {writeStringTextNode} from '../format/xsd.js';\nimport {\n  makeArrayExtender,\n  makeArrayPusher,\n  makeChildAppender,\n  makeReplacer,\n} from '../xml.js';\nimport GML2 from './GML2.js';\nimport GML3 from './GML3.js';\nimport GMLBase from './GMLBase.js';\n\n/**\n * @classdesc Feature format for reading and writing data in the GML format\n *            version 3.2.1.\n * @api\n */\nclass GML32 extends GML3 {\n  /**\n   * @param {import(\"./GMLBase.js\").Options} [options] Optional configuration object.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super(options);\n\n    /**\n     * @type {string}\n     */\n    this.schemaLocation = options.schemaLocation\n      ? options.schemaLocation\n      : this.namespace + ' http://schemas.opengis.net/gml/3.2.1/gml.xsd';\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} geometry Geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @override\n   */\n  writeGeometryElement(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    objectStack[objectStack.length - 1] = Object.assign(\n      {multiCurve: true, multiSurface: true},\n      context,\n    );\n    super.writeGeometryElement(node, geometry, objectStack);\n  }\n}\n\nGML32.prototype.namespace = 'http://www.opengis.net/gml/3.2';\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'pos': makeReplacer(GML3.prototype.readFlatPos),\n    'posList': makeReplacer(GML3.prototype.readFlatPosList),\n    'coordinates': makeReplacer(GML2.prototype.readFlatCoordinates),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.FLAT_LINEAR_RINGS_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'interior': GML3.prototype.interiorParser,\n    'exterior': GML3.prototype.exteriorParser,\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.GEOMETRY_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Point': makeReplacer(GMLBase.prototype.readPoint),\n    'MultiPoint': makeReplacer(GMLBase.prototype.readMultiPoint),\n    'LineString': makeReplacer(GMLBase.prototype.readLineString),\n    'MultiLineString': makeReplacer(GMLBase.prototype.readMultiLineString),\n    'LinearRing': makeReplacer(GMLBase.prototype.readLinearRing),\n    'Polygon': makeReplacer(GMLBase.prototype.readPolygon),\n    'MultiPolygon': makeReplacer(GMLBase.prototype.readMultiPolygon),\n    'Surface': makeReplacer(GML32.prototype.readSurface),\n    'MultiSurface': makeReplacer(GML3.prototype.readMultiSurface),\n    'Curve': makeReplacer(GML32.prototype.readCurve),\n    'MultiCurve': makeReplacer(GML3.prototype.readMultiCurve),\n    'Envelope': makeReplacer(GML32.prototype.readEnvelope),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTICURVE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'curveMember': makeArrayPusher(GML3.prototype.curveMemberParser),\n    'curveMembers': makeArrayPusher(GML3.prototype.curveMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTISURFACE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'surfaceMember': makeArrayPusher(GML3.prototype.surfaceMemberParser),\n    'surfaceMembers': makeArrayPusher(GML3.prototype.surfaceMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.CURVEMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString),\n    'Curve': makeArrayPusher(GML3.prototype.readCurve),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.SURFACEMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon),\n    'Surface': makeArrayPusher(GML3.prototype.readSurface),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.SURFACE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'patches': makeReplacer(GML3.prototype.readPatch),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.CURVE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'segments': makeReplacer(GML3.prototype.readSegment),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.ENVELOPE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lowerCorner': makeArrayPusher(GML3.prototype.readFlatPosList),\n    'upperCorner': makeArrayPusher(GML3.prototype.readFlatPosList),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.PATCHES_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'PolygonPatch': makeReplacer(GML3.prototype.readPolygonPatch),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.SEGMENTS_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LineStringSegment': makeArrayExtender(\n      GML3.prototype.readLineStringSegment,\n    ),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTIPOINT_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'pointMember': makeArrayPusher(GMLBase.prototype.pointMemberParser),\n    'pointMembers': makeArrayPusher(GMLBase.prototype.pointMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTILINESTRING_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lineStringMember': makeArrayPusher(\n      GMLBase.prototype.lineStringMemberParser,\n    ),\n    'lineStringMembers': makeArrayPusher(\n      GMLBase.prototype.lineStringMemberParser,\n    ),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTIPOLYGON_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'polygonMember': makeArrayPusher(GMLBase.prototype.polygonMemberParser),\n    'polygonMembers': makeArrayPusher(GMLBase.prototype.polygonMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.POINTMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Point': makeArrayPusher(GMLBase.prototype.readFlatCoordinatesFromNode),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.LINESTRINGMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.POLYGONMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.RING_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LinearRing': makeReplacer(GMLBase.prototype.readFlatLinearRing),\n    'Ring': makeReplacer(GML32.prototype.readFlatCurveRing),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.RING_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'exterior': makeChildAppender(GML3.prototype.writeRing),\n    'interior': makeChildAppender(GML3.prototype.writeRing),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.ENVELOPE_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lowerCorner': makeChildAppender(writeStringTextNode),\n    'upperCorner': makeChildAppender(writeStringTextNode),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'surfaceMember': makeChildAppender(\n      GML3.prototype.writeSurfaceOrPolygonMember,\n    ),\n    'polygonMember': makeChildAppender(\n      GML3.prototype.writeSurfaceOrPolygonMember,\n    ),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.POINTMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'pointMember': makeChildAppender(GML3.prototype.writePointMember),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lineStringMember': makeChildAppender(\n      GML3.prototype.writeLineStringOrCurveMember,\n    ),\n    'curveMember': makeChildAppender(\n      GML3.prototype.writeLineStringOrCurveMember,\n    ),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.GEOMETRY_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Curve': makeChildAppender(GML3.prototype.writeCurveOrLineString),\n    'MultiCurve': makeChildAppender(GML3.prototype.writeMultiCurveOrLineString),\n    'Point': makeChildAppender(GML32.prototype.writePoint),\n    'MultiPoint': makeChildAppender(GML3.prototype.writeMultiPoint),\n    'LineString': makeChildAppender(GML3.prototype.writeCurveOrLineString),\n    'MultiLineString': makeChildAppender(\n      GML3.prototype.writeMultiCurveOrLineString,\n    ),\n    'LinearRing': makeChildAppender(GML3.prototype.writeLinearRing),\n    'Polygon': makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),\n    'MultiPolygon': makeChildAppender(\n      GML3.prototype.writeMultiSurfaceOrPolygon,\n    ),\n    'Surface': makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),\n    'MultiSurface': makeChildAppender(\n      GML3.prototype.writeMultiSurfaceOrPolygon,\n    ),\n    'Envelope': makeChildAppender(GML3.prototype.writeEnvelope),\n  },\n};\n\nexport default GML32;\n","/**\n * @module ol/format/WFS\n */\nimport {assert} from '../asserts.js';\nimport {get as getProjection} from '../proj.js';\nimport {\n  XML_SCHEMA_INSTANCE_URI,\n  createElementNS,\n  isDocument,\n  makeArrayPusher,\n  makeChildAppender,\n  makeObjectPropertySetter,\n  makeSimpleNodeFactory,\n  parse,\n  parseNode,\n  pushParseAndPop,\n  pushSerializeAndPop,\n} from '../xml.js';\nimport GML2 from './GML2.js';\nimport GML3 from './GML3.js';\nimport GML32 from './GML32.js';\nimport GMLBase, {GMLNS} from './GMLBase.js';\nimport XMLFeature from './XMLFeature.js';\nimport {and as andFilterFn, bbox as bboxFilterFn} from './filter.js';\nimport {\n  readNonNegativeIntegerString,\n  readPositiveInteger,\n  writeStringTextNode,\n} from './xsd.js';\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst FEATURE_COLLECTION_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'boundedBy': makeObjectPropertySetter(\n      GMLBase.prototype.readExtentElement,\n      'bounds',\n    ),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'member': makeArrayPusher(GMLBase.prototype.readFeaturesInternal),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRANSACTION_SUMMARY_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'totalInserted': makeObjectPropertySetter(readPositiveInteger),\n    'totalUpdated': makeObjectPropertySetter(readPositiveInteger),\n    'totalDeleted': makeObjectPropertySetter(readPositiveInteger),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'totalInserted': makeObjectPropertySetter(readPositiveInteger),\n    'totalUpdated': makeObjectPropertySetter(readPositiveInteger),\n    'totalDeleted': makeObjectPropertySetter(readPositiveInteger),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRANSACTION_RESPONSE_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'TransactionSummary': makeObjectPropertySetter(\n      readTransactionSummary,\n      'transactionSummary',\n    ),\n    'InsertResults': makeObjectPropertySetter(readInsertResults, 'insertIds'),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'TransactionSummary': makeObjectPropertySetter(\n      readTransactionSummary,\n      'transactionSummary',\n    ),\n    'InsertResults': makeObjectPropertySetter(readInsertResults, 'insertIds'),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst QUERY_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'PropertyName': makeChildAppender(writeStringTextNode),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'PropertyName': makeChildAppender(writeStringTextNode),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRANSACTION_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'Insert': makeChildAppender(writeFeature),\n    'Update': makeChildAppender(writeUpdate),\n    'Delete': makeChildAppender(writeDelete),\n    'Property': makeChildAppender(writeProperty),\n    'Native': makeChildAppender(writeNative),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Insert': makeChildAppender(writeFeature),\n    'Update': makeChildAppender(writeUpdate),\n    'Delete': makeChildAppender(writeDelete),\n    'Property': makeChildAppender(writeProperty),\n    'Native': makeChildAppender(writeNative),\n  },\n};\n\n/**\n * @typedef {Object} Options\n * @property {Object<string, string>|string} [featureNS] The namespace URI used for features.\n * @property {Array<string>|string} [featureType] The feature type to parse. Only used for read operations.\n * @property {GMLBase} [gmlFormat] The GML format to use to parse the response.\n * Default is `ol/format/GML2` for WFS 1.0.0, `ol/format/GML3` for WFS 1.1.0 and `ol/format/GML32` for WFS 2.0.0.\n * @property {string} [schemaLocation] Optional schemaLocation to use for serialization, this will override the default.\n * @property {string} [version='1.1.0'] WFS version to use. Can be either `1.0.0`, `1.1.0` or `2.0.0`.\n */\n\n/**\n * @typedef {Object} WriteGetFeatureOptions\n * @property {string} featureNS The namespace URI used for features.\n * @property {string} featurePrefix The prefix for the feature namespace.\n * @property {Array<string|FeatureType>} featureTypes The feature type names or FeatureType objects to\n * define a unique bbox filter per feature type name (in this case, options `bbox` and `geometryName` are\n * ignored.).\n * @property {string} [srsName] SRS name. No srsName attribute will be set on\n * geometries when this is not provided.\n * @property {string} [handle] Handle.\n * @property {string} [outputFormat] Output format.\n * @property {number} [maxFeatures] Maximum number of features to fetch.\n * @property {string} [geometryName] Geometry name to use in a BBOX filter.\n * @property {Array<string>} [propertyNames] Optional list of property names to serialize.\n * @property {string} [viewParams] viewParams GeoServer vendor parameter.\n * @property {number} [startIndex] Start index to use for WFS paging. This is a\n * WFS 2.0 feature backported to WFS 1.1.0 by some Web Feature Services.\n * @property {number} [count] Number of features to retrieve when paging. This is a\n * WFS 2.0 feature backported to WFS 1.1.0 by some Web Feature Services. Please note that some\n * Web Feature Services have repurposed `maxfeatures` instead.\n * @property {import(\"../extent.js\").Extent} [bbox] Extent to use for the BBOX filter. The `geometryName`\n * option must be set.\n * @property {import(\"./filter/Filter.js\").default} [filter] Filter condition. See\n * {@link module:ol/format/filter} for more information.\n * @property {string} [resultType] Indicates what response should be returned,\n * e.g. `hits` only includes the `numberOfFeatures` attribute in the response and no features.\n */\n\n/**\n * @typedef {Object} FeatureType\n * @property {!string} name The feature type name.\n * @property {!import(\"../extent.js\").Extent} bbox Extent to use for the BBOX filter.\n * @property {!string} geometryName Geometry name to use in the BBOX filter.\n */\n\n/**\n * @typedef {Object} WriteTransactionOptions\n * @property {string} featureNS The namespace URI used for features.\n * @property {string} featurePrefix The prefix for the feature namespace.\n * @property {string} featureType The feature type name.\n * @property {string} [srsName] SRS name. No srsName attribute will be set on\n * geometries when this is not provided.\n * @property {string} [handle] Handle.\n * @property {boolean} [hasZ] Must be set to true if the transaction is for\n * a 3D layer. This will allow the Z coordinate to be included in the transaction.\n * @property {Array<Object>} nativeElements Native elements. Currently not supported.\n * @property {import(\"./GMLBase.js\").Options} [gmlOptions] GML options for the WFS transaction writer.\n * @property {string} [version='1.1.0'] WFS version to use for the transaction. Can be either `1.0.0`, `1.1.0` or `2.0.0`.\n */\n\n/**\n * Number of features; bounds/extent.\n * @typedef {Object} FeatureCollectionMetadata\n * @property {number} numberOfFeatures NumberOfFeatures.\n * @property {import(\"../extent.js\").Extent} bounds Bounds.\n */\n\n/**\n * @typedef {Object} TransactionSummary\n * @property {number} totalDeleted TotalDeleted.\n * @property {number} totalInserted TotalInserted.\n * @property {number} totalUpdated TotalUpdated.\n */\n\n/**\n * Total deleted; total inserted; total updated; array of insert ids.\n * @typedef {Object} TransactionResponse\n * @property {TransactionSummary} transactionSummary Transaction summary.\n * @property {Array<string>} insertIds InsertIds.\n */\n\n/**\n * @type {string}\n */\nconst FEATURE_PREFIX = 'feature';\n\n/**\n * @type {string}\n */\nconst XMLNS = 'http://www.w3.org/2000/xmlns/';\n\n/**\n * @type {Object<string, string>}\n */\nconst OGCNS = {\n  '2.0.0': 'http://www.opengis.net/ogc/1.1',\n  '1.1.0': 'http://www.opengis.net/ogc',\n  '1.0.0': 'http://www.opengis.net/ogc',\n};\n\n/**\n * @type {Object<string, string>}\n */\nconst WFSNS = {\n  '2.0.0': 'http://www.opengis.net/wfs/2.0',\n  '1.1.0': 'http://www.opengis.net/wfs',\n  '1.0.0': 'http://www.opengis.net/wfs',\n};\n\n/**\n * @type {Object<string, string>}\n */\nconst FESNS = {\n  '2.0.0': 'http://www.opengis.net/fes/2.0',\n  '1.1.0': 'http://www.opengis.net/fes',\n  '1.0.0': 'http://www.opengis.net/fes',\n};\n\n/**\n * @type {Object<string, string>}\n */\nconst SCHEMA_LOCATIONS = {\n  '2.0.0':\n    'http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd',\n  '1.1.0':\n    'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd',\n  '1.0.0':\n    'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd',\n};\n\n/**\n * @type {Object<string, object>}\n */\nconst GML_FORMATS = {\n  '2.0.0': GML32,\n  '1.1.0': GML3,\n  '1.0.0': GML2,\n};\n\n/**\n * @const\n * @type {string}\n */\nconst DEFAULT_VERSION = '1.1.0';\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the WFS format.\n * By default, supports WFS version 1.1.0. You can pass a GML format\n * as option to override the default.\n * Also see {@link module:ol/format/GMLBase~GMLBase} which is used by this format.\n *\n * @api\n */\nclass WFS extends XMLFeature {\n  /**\n   * @param {Options} [options] Optional configuration object.\n   */\n  constructor(options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.version_ = options.version ? options.version : DEFAULT_VERSION;\n\n    /**\n     * @private\n     * @type {Array<string>|string|undefined}\n     */\n    this.featureType_ = options.featureType;\n\n    /**\n     * @private\n     * @type {Object<string, string>|string|undefined}\n     */\n    this.featureNS_ = options.featureNS;\n\n    /**\n     * @private\n     * @type {GMLBase}\n     */\n    this.gmlFormat_ = options.gmlFormat\n      ? options.gmlFormat\n      : new GML_FORMATS[this.version_]();\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.schemaLocation_ = options.schemaLocation\n      ? options.schemaLocation\n      : SCHEMA_LOCATIONS[this.version_];\n  }\n\n  /**\n   * @return {Array<string>|string|undefined} featureType\n   */\n  getFeatureType() {\n    return this.featureType_;\n  }\n\n  /**\n   * @param {Array<string>|string|undefined} featureType Feature type(s) to parse.\n   */\n  setFeatureType(featureType) {\n    this.featureType_ = featureType;\n  }\n\n  /**\n   * @protected\n   * @param {Element} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @override\n   */\n  readFeaturesFromNode(node, options) {\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    const context = {\n      node,\n    };\n    Object.assign(context, {\n      'featureType': this.featureType_,\n      'featureNS': this.featureNS_,\n    });\n\n    Object.assign(context, this.getReadOptions(node, options ? options : {}));\n    const objectStack = [context];\n    let featuresNS;\n    if (this.version_ === '2.0.0') {\n      featuresNS = FEATURE_COLLECTION_PARSERS;\n    } else {\n      featuresNS = this.gmlFormat_.FEATURE_COLLECTION_PARSERS;\n    }\n    let features = pushParseAndPop(\n      [],\n      featuresNS,\n      node,\n      objectStack,\n      this.gmlFormat_,\n    );\n    if (!features) {\n      features = [];\n    }\n    return features;\n  }\n\n  /**\n   * Read transaction response of the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {TransactionResponse|undefined} Transaction response.\n   * @api\n   */\n  readTransactionResponse(source) {\n    if (!source) {\n      return undefined;\n    }\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readTransactionResponseFromDocument(doc);\n    }\n    if (isDocument(source)) {\n      return this.readTransactionResponseFromDocument(\n        /** @type {Document} */ (source),\n      );\n    }\n    return this.readTransactionResponseFromNode(\n      /** @type {Element} */ (source),\n    );\n  }\n\n  /**\n   * Read feature collection metadata of the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   * @api\n   */\n  readFeatureCollectionMetadata(source) {\n    if (!source) {\n      return undefined;\n    }\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeatureCollectionMetadataFromDocument(doc);\n    }\n    if (isDocument(source)) {\n      return this.readFeatureCollectionMetadataFromDocument(\n        /** @type {Document} */ (source),\n      );\n    }\n    return this.readFeatureCollectionMetadataFromNode(\n      /** @type {Element} */ (source),\n    );\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   */\n  readFeatureCollectionMetadataFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFeatureCollectionMetadataFromNode(\n          /** @type {Element} */ (n),\n        );\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   */\n  readFeatureCollectionMetadataFromNode(node) {\n    const result = {};\n    const value = readNonNegativeIntegerString(\n      node.getAttribute('numberOfFeatures'),\n    );\n    result['numberOfFeatures'] = value;\n    return pushParseAndPop(\n      /** @type {FeatureCollectionMetadata} */ (result),\n      FEATURE_COLLECTION_PARSERS,\n      node,\n      [],\n      this.gmlFormat_,\n    );\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {TransactionResponse|undefined} Transaction response.\n   */\n  readTransactionResponseFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readTransactionResponseFromNode(/** @type {Element} */ (n));\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {TransactionResponse|undefined} Transaction response.\n   */\n  readTransactionResponseFromNode(node) {\n    return pushParseAndPop(\n      /** @type {TransactionResponse} */ ({}),\n      TRANSACTION_RESPONSE_PARSERS,\n      node,\n      [],\n    );\n  }\n\n  /**\n   * Encode format as WFS `GetFeature` and return the Node.\n   *\n   * @param {WriteGetFeatureOptions} options Options.\n   * @return {Node} Result.\n   * @api\n   */\n  writeGetFeature(options) {\n    const node = createElementNS(WFSNS[this.version_], 'GetFeature');\n    node.setAttribute('service', 'WFS');\n    node.setAttribute('version', this.version_);\n    if (options.handle) {\n      node.setAttribute('handle', options.handle);\n    }\n    if (options.outputFormat) {\n      node.setAttribute('outputFormat', options.outputFormat);\n    }\n    if (options.maxFeatures !== undefined) {\n      node.setAttribute('maxFeatures', String(options.maxFeatures));\n    }\n    if (options.resultType) {\n      node.setAttribute('resultType', options.resultType);\n    }\n    if (options.startIndex !== undefined) {\n      node.setAttribute('startIndex', String(options.startIndex));\n    }\n    if (options.count !== undefined) {\n      node.setAttribute('count', String(options.count));\n    }\n    if (options.viewParams !== undefined) {\n      node.setAttribute('viewParams', options.viewParams);\n    }\n    node.setAttributeNS(\n      XML_SCHEMA_INSTANCE_URI,\n      'xsi:schemaLocation',\n      this.schemaLocation_,\n    );\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    const context = {\n      node,\n    };\n    Object.assign(context, {\n      'version': this.version_,\n      'srsName': options.srsName,\n      'featureNS': options.featureNS ? options.featureNS : this.featureNS_,\n      'featurePrefix': options.featurePrefix,\n      'propertyNames': options.propertyNames ? options.propertyNames : [],\n    });\n    assert(\n      Array.isArray(options.featureTypes),\n      '`options.featureTypes` must be an Array',\n    );\n    if (typeof options.featureTypes[0] === 'string') {\n      let filter = options.filter;\n      if (options.bbox) {\n        assert(\n          options.geometryName,\n          '`options.geometryName` must also be provided when `options.bbox` is set',\n        );\n        filter = this.combineBboxAndFilter(\n          options.geometryName,\n          options.bbox,\n          options.srsName,\n          filter,\n        );\n      }\n      Object.assign(context, {\n        'geometryName': options.geometryName,\n        'filter': filter,\n      });\n      writeGetFeature(\n        node,\n        /** @type {!Array<string>} */ (options.featureTypes),\n        [context],\n      );\n    } else {\n      // Write one query node per element in featuresType.\n      options.featureTypes.forEach((/** @type {FeatureType} */ featureType) => {\n        const completeFilter = this.combineBboxAndFilter(\n          featureType.geometryName,\n          featureType.bbox,\n          options.srsName,\n          options.filter,\n        );\n        Object.assign(context, {\n          'geometryName': featureType.geometryName,\n          'filter': completeFilter,\n        });\n        writeGetFeature(node, [featureType.name], [context]);\n      });\n    }\n    return node;\n  }\n\n  /**\n   * Create a bbox filter and combine it with another optional filter.\n   *\n   * @param {!string} geometryName Geometry name to use.\n   * @param {!import(\"../extent.js\").Extent} extent Extent.\n   * @param {string} [srsName] SRS name. No srsName attribute will be\n   *    set on geometries when this is not provided.\n   * @param {import(\"./filter/Filter.js\").default} [filter] Filter condition.\n   * @return {import(\"./filter/Filter.js\").default} The filter.\n   */\n  combineBboxAndFilter(geometryName, extent, srsName, filter) {\n    const bboxFilter = bboxFilterFn(geometryName, extent, srsName);\n    if (filter) {\n      // if bbox and filter are both set, combine the two into a single filter\n      return andFilterFn(filter, bboxFilter);\n    }\n    return bboxFilter;\n  }\n\n  /**\n   * Encode format as WFS `Transaction` and return the Node.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} inserts The features to insert.\n   * @param {Array<import(\"../Feature.js\").default>} updates The features to update.\n   * @param {Array<import(\"../Feature.js\").default>} deletes The features to delete.\n   * @param {WriteTransactionOptions} options Write options.\n   * @return {Node} Result.\n   * @api\n   */\n  writeTransaction(inserts, updates, deletes, options) {\n    const objectStack = [];\n    const version = options.version ? options.version : this.version_;\n    const node = createElementNS(WFSNS[version], 'Transaction');\n\n    node.setAttribute('service', 'WFS');\n    node.setAttribute('version', version);\n    let baseObj;\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    if (options) {\n      baseObj = options.gmlOptions ? options.gmlOptions : {};\n      if (options.handle) {\n        node.setAttribute('handle', options.handle);\n      }\n    }\n    node.setAttributeNS(\n      XML_SCHEMA_INSTANCE_URI,\n      'xsi:schemaLocation',\n      SCHEMA_LOCATIONS[version],\n    );\n\n    const request = createTransactionRequest(node, baseObj, version, options);\n    if (inserts) {\n      serializeTransactionRequest('Insert', inserts, objectStack, request);\n    }\n    if (updates) {\n      serializeTransactionRequest('Update', updates, objectStack, request);\n    }\n    if (deletes) {\n      serializeTransactionRequest('Delete', deletes, objectStack, request);\n    }\n    if (options.nativeElements) {\n      serializeTransactionRequest(\n        'Native',\n        options.nativeElements,\n        objectStack,\n        request,\n      );\n    }\n    return node;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @override\n   */\n  readProjectionFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readProjectionFromNode(/** @type {Element} */ (n));\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @override\n   */\n  readProjectionFromNode(node) {\n    if (node.firstElementChild && node.firstElementChild.firstElementChild) {\n      node = node.firstElementChild.firstElementChild;\n      for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n        if (\n          !(\n            n.childNodes.length === 0 ||\n            (n.childNodes.length === 1 && n.firstChild.nodeType === 3)\n          )\n        ) {\n          const objectStack = [{}];\n          this.gmlFormat_.readGeometryElement(n, objectStack);\n          return getProjection(objectStack.pop().srsName);\n        }\n      }\n    }\n\n    return null;\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {*} baseObj Base object.\n * @param {string} version Version.\n * @param {WriteTransactionOptions} options Options.\n * @return {Object} Request object.\n */\nfunction createTransactionRequest(node, baseObj, version, options) {\n  const featurePrefix = options.featurePrefix\n    ? options.featurePrefix\n    : FEATURE_PREFIX;\n  let gmlVersion;\n  if (version === '1.0.0') {\n    gmlVersion = 2;\n  } else if (version === '1.1.0') {\n    gmlVersion = 3;\n  } else if (version === '2.0.0') {\n    gmlVersion = 3.2;\n  }\n  const obj = Object.assign(\n    {node},\n    {\n      version,\n      'featureNS': options.featureNS,\n      'featureType': options.featureType,\n      'featurePrefix': featurePrefix,\n      'gmlVersion': gmlVersion,\n      'hasZ': options.hasZ,\n      'srsName': options.srsName,\n    },\n    baseObj,\n  );\n  return obj;\n}\n\n/**\n * @param {string} type Request type.\n * @param {Array<import(\"../Feature.js\").default>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @param {Element} request Transaction Request.\n */\nfunction serializeTransactionRequest(type, features, objectStack, request) {\n  pushSerializeAndPop(\n    request,\n    TRANSACTION_SERIALIZERS,\n    makeSimpleNodeFactory(type),\n    features,\n    objectStack,\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Transaction Summary.\n */\nfunction readTransactionSummary(node, objectStack) {\n  return pushParseAndPop({}, TRANSACTION_SUMMARY_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst OGC_FID_PARSERS = {\n  'http://www.opengis.net/ogc': {\n    'FeatureId': makeArrayPusher(function (node, objectStack) {\n      return node.getAttribute('fid');\n    }),\n  },\n  'http://www.opengis.net/ogc/1.1': {\n    'FeatureId': makeArrayPusher(function (node, objectStack) {\n      return node.getAttribute('fid');\n    }),\n  },\n};\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction fidParser(node, objectStack) {\n  parseNode(OGC_FID_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst INSERT_RESULTS_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'Feature': fidParser,\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Feature': fidParser,\n  },\n};\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<string>|undefined} Insert results.\n */\nfunction readInsertResults(node, objectStack) {\n  return pushParseAndPop([], INSERT_RESULTS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeFeature(node, feature, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const featureType = context['featureType'];\n  const featureNS = context['featureNS'];\n  const gmlVersion = context['gmlVersion'];\n  const child = createElementNS(featureNS, featureType);\n  node.appendChild(child);\n  if (gmlVersion === 2) {\n    GML2.prototype.writeFeatureElement(child, feature, objectStack);\n  } else if (gmlVersion === 3) {\n    GML3.prototype.writeFeatureElement(child, feature, objectStack);\n  } else {\n    GML32.prototype.writeFeatureElement(child, feature, objectStack);\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @param {number|string} fid Feature identifier.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeOgcFidFilter(node, fid, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const version = context['version'];\n  const ns = OGCNS[version];\n  const filter = createElementNS(ns, 'Filter');\n  const child = createElementNS(ns, 'FeatureId');\n  filter.appendChild(child);\n  child.setAttribute('fid', /** @type {string} */ (fid));\n  node.appendChild(filter);\n}\n\n/**\n * @param {string|undefined} featurePrefix The prefix of the feature.\n * @param {string} featureType The type of the feature.\n * @return {string} The value of the typeName property.\n */\nfunction getTypeName(featurePrefix, featureType) {\n  featurePrefix = featurePrefix ? featurePrefix : FEATURE_PREFIX;\n  const prefix = featurePrefix + ':';\n  // The featureType already contains the prefix.\n  if (featureType.startsWith(prefix)) {\n    return featureType;\n  }\n  return prefix + featureType;\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeDelete(node, feature, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  assert(feature.getId() !== undefined, 'Features must have an id set');\n  const featureType = context['featureType'];\n  const featurePrefix = context['featurePrefix'];\n  const featureNS = context['featureNS'];\n  const typeName = getTypeName(featurePrefix, featureType);\n  node.setAttribute('typeName', typeName);\n  node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  const fid = feature.getId();\n  if (fid !== undefined) {\n    writeOgcFidFilter(node, fid, objectStack);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeUpdate(node, feature, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  assert(feature.getId() !== undefined, 'Features must have an id set');\n  const version = context['version'];\n  const featureType = context['featureType'];\n  const featurePrefix = context['featurePrefix'];\n  const featureNS = context['featureNS'];\n  const typeName = getTypeName(featurePrefix, featureType);\n  const geometryName = feature.getGeometryName();\n  node.setAttribute('typeName', typeName);\n  node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  const fid = feature.getId();\n  if (fid !== undefined) {\n    const keys = feature.getKeys();\n    const values = [];\n    for (let i = 0, ii = keys.length; i < ii; i++) {\n      const value = feature.get(keys[i]);\n      if (value !== undefined) {\n        let name = keys[i];\n        if (\n          value &&\n          typeof (/** @type {?} */ (value).getSimplifiedGeometry) === 'function'\n        ) {\n          name = geometryName;\n        }\n        values.push({name: name, value: value});\n      }\n    }\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */ ({\n        version,\n        'gmlVersion': context['gmlVersion'],\n        node,\n        'hasZ': context['hasZ'],\n        'srsName': context['srsName'],\n      }),\n      TRANSACTION_SERIALIZERS,\n      makeSimpleNodeFactory('Property'),\n      values,\n      objectStack,\n    );\n    writeOgcFidFilter(node, fid, objectStack);\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @param {Object} pair Property name and value.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeProperty(node, pair, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const version = context['version'];\n  const ns = WFSNS[version];\n  const tagName = version === '2.0.0' ? 'ValueReference' : 'Name';\n  const name = createElementNS(ns, tagName);\n  const gmlVersion = context['gmlVersion'];\n  node.appendChild(name);\n  writeStringTextNode(name, pair.name);\n  if (pair.value !== undefined && pair.value !== null) {\n    const value = createElementNS(ns, 'Value');\n    node.appendChild(value);\n    if (\n      pair.value &&\n      typeof (/** @type {?} */ (pair.value).getSimplifiedGeometry) ===\n        'function'\n    ) {\n      if (gmlVersion === 2) {\n        GML2.prototype.writeGeometryElement(value, pair.value, objectStack);\n      } else if (gmlVersion === 3) {\n        GML3.prototype.writeGeometryElement(value, pair.value, objectStack);\n      } else {\n        GML32.prototype.writeGeometryElement(value, pair.value, objectStack);\n      }\n    } else {\n      writeStringTextNode(value, pair.value);\n    }\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {{vendorId: string, safeToIgnore: boolean, value: string}} nativeElement The native element.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeNative(node, nativeElement, objectStack) {\n  if (nativeElement.vendorId) {\n    node.setAttribute('vendorId', nativeElement.vendorId);\n  }\n  if (nativeElement.safeToIgnore !== undefined) {\n    node.setAttribute('safeToIgnore', String(nativeElement.safeToIgnore));\n  }\n  if (nativeElement.value !== undefined) {\n    writeStringTextNode(node, nativeElement.value);\n  }\n}\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst GETFEATURE_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'Query': makeChildAppender(writeQuery),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Query': makeChildAppender(writeQuery),\n  },\n  'http://www.opengis.net/ogc': {\n    'During': makeChildAppender(writeDuringFilter),\n    'And': makeChildAppender(writeLogicalFilter),\n    'Or': makeChildAppender(writeLogicalFilter),\n    'Not': makeChildAppender(writeNotFilter),\n    'BBOX': makeChildAppender(writeBboxFilter),\n    'Contains': makeChildAppender(writeSpatialFilter),\n    'Intersects': makeChildAppender(writeSpatialFilter),\n    'Within': makeChildAppender(writeSpatialFilter),\n    'DWithin': makeChildAppender(writeDWithinFilter),\n    'PropertyIsEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNotEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNull': makeChildAppender(writeIsNullFilter),\n    'PropertyIsBetween': makeChildAppender(writeIsBetweenFilter),\n    'PropertyIsLike': makeChildAppender(writeIsLikeFilter),\n  },\n  'http://www.opengis.net/fes/2.0': {\n    'During': makeChildAppender(writeDuringFilter),\n    'And': makeChildAppender(writeLogicalFilter),\n    'Or': makeChildAppender(writeLogicalFilter),\n    'Not': makeChildAppender(writeNotFilter),\n    'BBOX': makeChildAppender(writeBboxFilter),\n    'Contains': makeChildAppender(writeSpatialFilter),\n    'Disjoint': makeChildAppender(writeSpatialFilter),\n    'Intersects': makeChildAppender(writeSpatialFilter),\n    'ResourceId': makeChildAppender(writeResourceIdFilter),\n    'Within': makeChildAppender(writeSpatialFilter),\n    'DWithin': makeChildAppender(writeDWithinFilter),\n    'PropertyIsEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNotEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNull': makeChildAppender(writeIsNullFilter),\n    'PropertyIsBetween': makeChildAppender(writeIsBetweenFilter),\n    'PropertyIsLike': makeChildAppender(writeIsLikeFilter),\n  },\n};\n\n/**\n * @param {Element} node Node.\n * @param {string} featureType Feature type.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeQuery(node, featureType, objectStack) {\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const version = context['version'];\n  const featurePrefix = context['featurePrefix'];\n  const featureNS = context['featureNS'];\n  const propertyNames = context['propertyNames'];\n  const srsName = context['srsName'];\n  let typeName;\n  // If feature prefix is not defined, we must not use the default prefix.\n  if (featurePrefix) {\n    typeName = getTypeName(featurePrefix, featureType);\n  } else {\n    typeName = featureType;\n  }\n  let typeNameAttr;\n  if (version === '2.0.0') {\n    typeNameAttr = 'typeNames';\n  } else {\n    typeNameAttr = 'typeName';\n  }\n  node.setAttribute(typeNameAttr, typeName);\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  if (featureNS) {\n    node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  }\n  const item = /** @type {import(\"../xml.js\").NodeStackItem} */ (\n    Object.assign({}, context)\n  );\n  item.node = node;\n  pushSerializeAndPop(\n    item,\n    QUERY_SERIALIZERS,\n    makeSimpleNodeFactory('PropertyName'),\n    propertyNames,\n    objectStack,\n  );\n  const filter = context['filter'];\n  if (filter) {\n    const child = createElementNS(getFilterNS(version), 'Filter');\n    node.appendChild(child);\n    writeFilterCondition(child, filter, objectStack);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/Filter.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeFilterCondition(node, filter, objectStack) {\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const item = {node};\n  Object.assign(item, {context});\n  pushSerializeAndPop(\n    item,\n    GETFEATURE_SERIALIZERS,\n    makeSimpleNodeFactory(filter.getTagName()),\n    [filter],\n    objectStack,\n  );\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/Bbox.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeBboxFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  parent['srsName'] = filter.srsName;\n  const format = GML_FORMATS[version];\n\n  writePropertyName(version, node, filter.geometryName);\n  format.prototype.writeGeometryElement(node, filter.extent, objectStack);\n}\n\n/**\n * @param {Element} node Element.\n * @param {import(\"./filter/ResourceId.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeResourceIdFilter(node, filter, objectStack) {\n  node.setAttribute('rid', /** @type {string} */ (filter.rid));\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/Spatial.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeSpatialFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  parent['srsName'] = filter.srsName;\n  const format = GML_FORMATS[version];\n\n  writePropertyName(version, node, filter.geometryName);\n  format.prototype.writeGeometryElement(node, filter.geometry, objectStack);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/DWithin.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeDWithinFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  writeSpatialFilter(node, filter, objectStack);\n  const distance = createElementNS(getFilterNS(version), 'Distance');\n  writeStringTextNode(distance, filter.distance.toString());\n  if (version === '2.0.0') {\n    distance.setAttribute('uom', filter.unit);\n  } else {\n    distance.setAttribute('units', filter.unit);\n  }\n  node.appendChild(distance);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/During.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeDuringFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n\n  writeExpression(FESNS[version], 'ValueReference', node, filter.propertyName);\n  const timePeriod = createElementNS(GMLNS, 'TimePeriod');\n\n  node.appendChild(timePeriod);\n\n  const begin = createElementNS(GMLNS, 'begin');\n  timePeriod.appendChild(begin);\n  writeTimeInstant(begin, filter.begin);\n\n  const end = createElementNS(GMLNS, 'end');\n  timePeriod.appendChild(end);\n  writeTimeInstant(end, filter.end);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/LogicalNary.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLogicalFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const item = {node};\n  Object.assign(item, {context});\n  const conditions = filter.conditions;\n  for (let i = 0, ii = conditions.length; i < ii; ++i) {\n    const condition = conditions[i];\n    pushSerializeAndPop(\n      item,\n      GETFEATURE_SERIALIZERS,\n      makeSimpleNodeFactory(condition.getTagName()),\n      [condition],\n      objectStack,\n    );\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/Not.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeNotFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const item = {node};\n  Object.assign(item, {context});\n  const condition = filter.condition;\n  pushSerializeAndPop(\n    item,\n    GETFEATURE_SERIALIZERS,\n    makeSimpleNodeFactory(condition.getTagName()),\n    [condition],\n    objectStack,\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/ComparisonBinary.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeComparisonFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  if (filter.matchCase !== undefined) {\n    node.setAttribute('matchCase', filter.matchCase.toString());\n  }\n  writePropertyName(version, node, filter.propertyName);\n  writeLiteral(version, node, '' + filter.expression);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/IsNull.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeIsNullFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  writePropertyName(version, node, filter.propertyName);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/IsBetween.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeIsBetweenFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  const ns = getFilterNS(version);\n\n  writePropertyName(version, node, filter.propertyName);\n\n  const lowerBoundary = createElementNS(ns, 'LowerBoundary');\n  node.appendChild(lowerBoundary);\n  writeLiteral(version, lowerBoundary, '' + filter.lowerBoundary);\n\n  const upperBoundary = createElementNS(ns, 'UpperBoundary');\n  node.appendChild(upperBoundary);\n  writeLiteral(version, upperBoundary, '' + filter.upperBoundary);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/IsLike.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeIsLikeFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  node.setAttribute('wildCard', filter.wildCard);\n  node.setAttribute('singleChar', filter.singleChar);\n  node.setAttribute('escapeChar', filter.escapeChar);\n  if (filter.matchCase !== undefined) {\n    node.setAttribute('matchCase', filter.matchCase.toString());\n  }\n  writePropertyName(version, node, filter.propertyName);\n  writeLiteral(version, node, '' + filter.pattern);\n}\n\n/**\n * @param {string} ns Namespace.\n * @param {string} tagName Tag name.\n * @param {Node} node Node.\n * @param {string} value Value.\n */\nfunction writeExpression(ns, tagName, node, value) {\n  const property = createElementNS(ns, tagName);\n  writeStringTextNode(property, value);\n  node.appendChild(property);\n}\n\n/**\n * @param {string} version Version.\n * @param {Node} node Node.\n * @param {string} value PropertyName value.\n */\nfunction writeLiteral(version, node, value) {\n  writeExpression(getFilterNS(version), 'Literal', node, value);\n}\n\n/**\n * @param {string} version Version.\n * @param {Node} node Node.\n * @param {string} value PropertyName value.\n */\nfunction writePropertyName(version, node, value) {\n  if (version === '2.0.0') {\n    writeExpression(FESNS[version], 'ValueReference', node, value);\n  } else {\n    writeExpression(OGCNS[version], 'PropertyName', node, value);\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @param {string} time PropertyName value.\n */\nfunction writeTimeInstant(node, time) {\n  const timeInstant = createElementNS(GMLNS, 'TimeInstant');\n  node.appendChild(timeInstant);\n\n  const timePosition = createElementNS(GMLNS, 'timePosition');\n  timeInstant.appendChild(timePosition);\n  writeStringTextNode(timePosition, time);\n}\n\n/**\n * Encode filter as WFS `Filter` and return the Node.\n *\n * @param {import(\"./filter/Filter.js\").default} filter Filter.\n * @param {string} version WFS version. If not provided defaults to '1.1.0'\n * @return {Node} Result.\n * @api\n */\nexport function writeFilter(filter, version) {\n  version = version || '1.1.0';\n  const child = createElementNS(getFilterNS(version), 'Filter');\n  const context = {\n    node: child,\n  };\n  Object.assign(context, {\n    'version': version,\n    'filter': filter,\n  });\n  writeFilterCondition(child, filter, [context]);\n  return child;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<string>} featureTypes Feature types.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeGetFeature(node, featureTypes, objectStack) {\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const item = /** @type {import(\"../xml.js\").NodeStackItem} */ (\n    Object.assign({}, context)\n  );\n  item.node = node;\n  pushSerializeAndPop(\n    item,\n    GETFEATURE_SERIALIZERS,\n    makeSimpleNodeFactory('Query'),\n    featureTypes,\n    objectStack,\n  );\n}\n\nfunction getFilterNS(version) {\n  let ns;\n  if (version === '2.0.0') {\n    ns = FESNS[version];\n  } else {\n    ns = OGCNS[version];\n  }\n  return ns;\n}\n\nexport default WFS;\n","import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport {\n  and as andFilter,\n  equalTo as equalToFilter,\n  like as likeFilter,\n} from '../src/ol/format/filter.js';\nimport {GeoJSON, WFS} from '../src/ol/format.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport ImageTile from '../src/ol/source/ImageTile.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Stroke, Style} from '../src/ol/style.js';\n\nconst vectorSource = new VectorSource();\nconst vector = new VectorLayer({\n  source: vectorSource,\n  style: new Style({\n    stroke: new Stroke({\n      color: 'rgba(0, 0, 255, 1.0)',\n      width: 2,\n    }),\n  }),\n});\n\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\nconst attributions =\n  '<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> ' +\n  '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>';\n\nconst raster = new TileLayer({\n  source: new ImageTile({\n    attributions: attributions,\n    url: 'https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key=' + key,\n    tileSize: 512,\n    maxZoom: 20,\n  }),\n});\n\nconst map = new Map({\n  layers: [raster, vector],\n  target: document.getElementById('map'),\n  view: new View({\n    center: [-8908887.277395891, 5381918.072437216],\n    maxZoom: 19,\n    zoom: 12,\n  }),\n});\n\n// generate a GetFeature request\nconst featureRequest = new WFS().writeGetFeature({\n  srsName: 'EPSG:3857',\n  featureNS: 'http://openstreemap.org',\n  featurePrefix: 'osm',\n  featureTypes: ['water_areas'],\n  outputFormat: 'application/json',\n  filter: andFilter(\n    likeFilter('name', 'Mississippi*'),\n    equalToFilter('waterway', 'riverbank'),\n  ),\n});\n\n// then post the request and add the received features to a layer\nfetch('https://ahocevar.com/geoserver/wfs', {\n  method: 'POST',\n  body: new XMLSerializer().serializeToString(featureRequest),\n})\n  .then(function (response) {\n    return response.json();\n  })\n  .then(function (json) {\n    const features = new GeoJSON().readFeatures(json);\n    vectorSource.addFeatures(features);\n    map.getView().fit(vectorSource.getExtent());\n  });\n"],"names":["constructor","tagName","this","tagName_","getTagName","conditions","super","length","Array","prototype","slice","call","arguments","geometryName","extent","srsName","Error","propertyName","expression","matchCase","pattern","wildCard","singleChar","escapeChar","undefined","and","params","concat","Function","bind","apply","schemaLocation","MULTIGEOMETRY_TO_MEMBER_NODENAME","GML3","GMLBase","options","surface_","surface","curve_","curve","multiCurve_","multiCurve","multiSurface_","multiSurface","hasZ","readMultiCurve","node","objectStack","lineStrings","MULTICURVE_PARSERS","MultiLineString","readFlatCurveRing","flatCoordinates","i","ii","getFlatCoordinates","readMultiSurface","polygons","MULTISURFACE_PARSERS","MultiPolygon","curveMemberParser","CURVEMEMBER_PARSERS","surfaceMemberParser","SURFACEMEMBER_PARSERS","readPatch","PATCHES_PARSERS","readSegment","SEGMENTS_PARSERS","readPolygonPatch","FLAT_LINEAR_RINGS_PARSERS","readLineStringSegment","GEOMETRY_FLAT_COORDINATES_PARSERS","interiorParser","flatLinearRing","RING_PARSERS","push","exteriorParser","readSurface","flatLinearRings","SURFACE_PARSERS","ends","Polygon","readCurve","CURVE_PARSERS","LineString","readEnvelope","ENVELOPE_PARSERS","readFlatPos","s","re","m","exec","parseFloat","substr","containerSrs","getAxisOrientation","y","x","len","readFlatPosList","replace","context","contextDimension","axisOrientation","coords","split","dim","getAttribute","asXYZ","startsWith","z","writePos_","value","srsDimension","setAttribute","point","getCoordinates","getCoords_","writePosList_","points","parts","join","writePoint","geometry","pos","namespaceURI","appendChild","writeEnvelope","values","ENVELOPE_SERIALIZERS","writeLinearRing","posList","RING_NODE_FACTORY_","nodeName","parentNode","exteriorWritten","writeSurfaceOrPolygon","rings","getLinearRings","RING_SERIALIZERS","patches","writeSurfacePatches_","writeCurveOrLineString","segments","writeCurveSegments_","writeMultiSurfaceOrPolygon","getPolygons","SURFACEORPOLYGONMEMBER_SERIALIZERS","MULTIGEOMETRY_MEMBER_NODE_FACTORY_","writeMultiPoint","getPoints","POINTMEMBER_SERIALIZERS","writeMultiCurveOrLineString","lines","getLineStrings","LINESTRINGORCURVEMEMBER_SERIALIZERS","writeRing","ring","linearRing","writeSurfaceOrPolygonMember","polygon","child","GEOMETRY_NODE_FACTORY_","writePointMember","writeLineStringOrCurveMember","line","writeGeometryElement","item","Object","assign","isArray","GEOMETRY_SERIALIZERS","writeFeatureElement","feature","fid","getId","featureNS","getGeometryName","serializers","keys","hasProperties","properties","getProperties","key","writeFeatureMembers_","features","featureType","namespace","getType","writeGeometryNode","adaptOptions","geom","writeFeaturesNode","setAttributeNS","GML2","readFlatCoordinates","GEOMETRY_PARSERS","readPoint","readMultiPoint","readLineString","readMultiLineString","readLinearRing","readPolygon","readMultiPolygon","readFlatLinearRing","writeFeatures","GML32","MULTIPOINT_PARSERS","pointMemberParser","MULTILINESTRING_PARSERS","lineStringMemberParser","MULTIPOLYGON_PARSERS","polygonMemberParser","POINTMEMBER_PARSERS","readFlatCoordinatesFromNode","LINESTRINGMEMBER_PARSERS","POLYGONMEMBER_PARSERS","FEATURE_COLLECTION_PARSERS","readExtentElement","readFeaturesInternal","TRANSACTION_SUMMARY_PARSERS","TRANSACTION_RESPONSE_PARSERS","readTransactionSummary","readInsertResults","QUERY_SERIALIZERS","TRANSACTION_SERIALIZERS","writeFeature","writeUpdate","writeDelete","writeProperty","writeNative","FEATURE_PREFIX","XMLNS","OGCNS","WFSNS","FESNS","SCHEMA_LOCATIONS","GML_FORMATS","WFS","XMLFeature","version_","version","featureType_","featureNS_","gmlFormat_","gmlFormat","schemaLocation_","getFeatureType","setFeatureType","readFeaturesFromNode","getReadOptions","featuresNS","readTransactionResponse","source","doc","readTransactionResponseFromDocument","readTransactionResponseFromNode","readFeatureCollectionMetadata","readFeatureCollectionMetadataFromDocument","readFeatureCollectionMetadataFromNode","n","nextSibling","nodeType","Node","ELEMENT_NODE","result","writeGetFeature","handle","outputFormat","maxFeatures","String","resultType","startIndex","count","viewParams","featurePrefix","propertyNames","featureTypes","filter","bbox","combineBboxAndFilter","forEach","completeFilter","name","bboxFilter","writeTransaction","inserts","updates","deletes","baseObj","gmlOptions","request","gmlVersion","obj","createTransactionRequest","serializeTransactionRequest","nativeElements","readProjectionFromDocument","firstChild","readProjectionFromNode","firstElementChild","nextElementSibling","childNodes","readGeometryElement","pop","type","OGC_FID_PARSERS","fidParser","INSERT_RESULTS_PARSERS","writeOgcFidFilter","ns","getTypeName","prefix","typeName","getKeys","get","pair","nativeElement","vendorId","safeToIgnore","GETFEATURE_SERIALIZERS","writeQuery","writeDuringFilter","writeLogicalFilter","writeNotFilter","writeBboxFilter","writeSpatialFilter","writeDWithinFilter","writeComparisonFilter","writeIsNullFilter","writeIsBetweenFilter","writeIsLikeFilter","typeNameAttr","getFilterNS","writeFilterCondition","parent","format","writePropertyName","distance","toString","unit","writeExpression","timePeriod","begin","writeTimeInstant","end","condition","writeLiteral","lowerBoundary","upperBoundary","property","time","timeInstant","timePosition","vectorSource","vector","Vector","style","Style","stroke","Stroke","color","width","raster","Tile","ImageTile","attributions","url","tileSize","maxZoom","map","Map","layers","target","document","getElementById","view","View","center","zoom","featureRequest","equalTo","fetch","method","body","XMLSerializer","serializeToString","then","response","json","GeoJSON","readFeatures","addFeatures","getView","fit","getExtent"],"sourceRoot":""}