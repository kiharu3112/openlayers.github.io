"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9025],{80972:function(e,t,s){var r=s(95616),n=s(10572),o=s(15264),a=s(41564),c=s(29810),i=s(87240),u=s(9444),l=s(68266),d=s(74676),p=s(35947),f=s(23986),g=s(12185),m=s(10135),v=s(25231),y=s(27542);const w="https://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/FeatureServer/",A=new n.A,R=new c.A({loader:function(e,t,s){const n=w+"2/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+e[0]+',"ymin":'+e[1]+',"xmax":'+e[2]+',"ymax":'+e[3]+',"spatialReference":{"wkid":102100}}')+"&geometryType=esriGeometryEnvelope&inSR=102100&outFields=*&outSR=102100";r.ajax({url:n,dataType:"jsonp",success:function(e){if(e.error)alert(e.error.message+"\n"+e.error.details.join("\n"));else{const t=A.readFeatures(e,{featureProjection:s});t.length>0&&R.addFeatures(t)}}})},strategy:(0,y.Vs)((0,m.EN)({tileSize:512}))}),j=new f.A({source:R}),h=new g.A({source:new o.A({attributions:'Tiles Â© <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"})}),S=new u.Ay({source:R,type:"Polygon"}),F=new l.A;F.setActive(!1);const I=F.getFeatures(),b=new d.A({features:I});b.setActive(!1);const x=new a.A({interactions:(0,p.N)().extend([S,F,b]),layers:[h,j],target:document.getElementById("map"),view:new i.Ay({center:(0,v.Rb)([-110.875,37.345]),zoom:5})}),M=document.getElementById("type");M.onchange=function(){S.setActive("DRAW"===M.value),F.setActive("MODIFY"===M.value),b.setActive("MODIFY"===M.value)};const P={};I.on("add",(function(e){e.element.on("change",(function(e){P[e.target.get("objectid")]=!0}))})),I.on("remove",(function(e){const t=e.element,s=t.get("objectid");if(!0===P[s]){const e="["+A.writeFeature(t,{featureProjection:x.getView().getProjection()})+"]",n=w+"2/updateFeatures";r.post(n,{f:"json",features:e}).done((function(e){const t="string"==typeof e?JSON.parse(e):e;if(t.updateResults&&t.updateResults.length>0)if(!0!==t.updateResults[0].success){const e=t.updateResults[0].error;alert(e.description+" ("+e.code+")")}else delete P[s]}))}})),S.on("drawend",(function(e){const t=e.feature,s="["+A.writeFeature(t,{featureProjection:x.getView().getProjection()})+"]",n=w+"2/addFeatures";r.post(n,{f:"json",features:s}).done((function(e){const s="string"==typeof e?JSON.parse(e):e;if(s.addResults&&s.addResults.length>0)if(!0===s.addResults[0].success)t.set("objectid",s.addResults[0].objectId);else{const e=s.addResults[0].error;alert(e.description+" ("+e.code+")")}}))}))}},function(e){var t;t=80972,e(e.s=t)}]);
//# sourceMappingURL=vector-esri-edit.js.map