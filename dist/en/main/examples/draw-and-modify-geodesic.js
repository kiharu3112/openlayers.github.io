"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6680],{58227:function(e,t,o){var n=o(41564),r=o(87240),c=o(30470),i=o(29050),s=o(40878),f=o(74676),a=o(9444),u=o(90278),y=o(12185),m=o(23986),d=o(25231),g=o(28e3),l=o(29810),w=o(7074),G=o(88292),A=o(38276),p=o(44689),E=o(21133);const C=new y.A({source:new g.A}),h=new l.A,P=new G.Ay({fill:new A.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.A({color:"#33cc33",width:2}),image:new E.A({radius:7,fill:new A.A({color:"#ffcc33"})})}),S=new G.Ay({geometry:function(e){return e.get("modifyGeometry")||e.getGeometry()},fill:new A.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new p.A({color:"#ff3333",width:2}),image:new E.A({radius:7,fill:new A.A({color:"rgba(0, 0, 0, 0)"})})}),k=new m.A({source:h,style:function(e){return"GeometryCollection"===e.getGeometry().getType()?S:P}}),v=new n.A({layers:[C,k],target:"map",view:new r.Ay({center:[-11e6,66e5],zoom:3})}),I=new f.A({source:h}).getOverlay().getStyleFunction(),b=new f.A({source:h,style:function(e){return e.get("features").forEach((function(t){const o=t.get("modifyGeometry");if(o){const n=e.getGeometry().getCoordinates(),r=t.getGeometry().getGeometries(),i=r[0].getCoordinates()[0],s=r[1].getCoordinates(),f=v.getView().getProjection();let a,u,y;n[0]===s[0]&&n[1]===s[1]?(a=(0,d.pd)(i[0],f,"EPSG:4326"),u=(0,d.pd)(i[(i.length-1)/2],f,"EPSG:4326"),y=(0,w.Yf)(a,u)/2):(a=(0,d.pd)(s,f,"EPSG:4326"),u=(0,d.pd)(n,f,"EPSG:4326"),y=(0,w.Yf)(a,u));const m=(0,c.kj)((0,d.pd)(s,f,"EPSG:4326"),y,128);m.transform("EPSG:4326",f),r[0].setCoordinates(m.getCoordinates()),o.setGeometries(r)}})),I(e)}});let j,Y;b.on("modifystart",(function(e){e.features.forEach((function(e){const t=e.getGeometry();"GeometryCollection"===t.getType()&&e.set("modifyGeometry",t.clone(),!0)}))})),b.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t),e.unset("modifyGeometry",!0))}))})),v.addInteraction(b);const F=document.getElementById("type");function T(){let e,t=F.value;"Geodesic"===t&&(t="Circle",e=function(e,t,o){t||(t=new i.A([new c.Ay([]),new s.A(e[0])]));const n=t.getGeometries(),r=(0,d.pd)(e[0],o,"EPSG:4326"),f=(0,d.pd)(e[1],o,"EPSG:4326"),a=(0,w.Yf)(r,f),u=(0,c.kj)(r,a,128);return u.transform("EPSG:4326",o),n[0].setCoordinates(u.getCoordinates()),t.setGeometries(n),t}),j=new a.Ay({source:h,type:t,geometryFunction:e}),v.addInteraction(j),Y=new u.A({source:h}),v.addInteraction(Y)}F.onchange=function(){v.removeInteraction(j),v.removeInteraction(Y),T()},T()}},function(e){var t;t=58227,e(e.s=t)}]);
//# sourceMappingURL=draw-and-modify-geodesic.js.map