"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8615],{87896:function(e,t,n){var a=n(36804),i=n(41564),o=n(31716),r=n(87240);var s=n(5596),l=n(12911),c=n(10135);const d=new function(){return new Worker(n.p+"offscreen-canvas.worker.worker.js")};let u,m,p,g,f,w;function h(){if(f){const e=w.viewState,t=f.viewState,n=e.center,a=e.resolution,i=e.rotation,o=t.center,r=t.resolution,s=t.rotation,c=(0,l.vt)();i||(0,l.Zz)(c,(o[0]-n[0])/a,(n[1]-o[1])/a,r/a,r/a,i-s,0,0),m.style.transform=(0,l.dI)(c)}}const y=new i.A({layers:[new a.A({render:function(e){return u||(u=document.createElement("div"),u.style.position="absolute",u.style.width="100%",u.style.height="100%",m=document.createElement("div"),m.style.position="absolute",m.style.width="100%",m.style.height="100%",u.appendChild(m),p=document.createElement("canvas"),p.style.position="absolute",p.style.left="0",p.style.transformOrigin="top left",m.appendChild(p)),w=e,h(),g?e.animate=!0:(g=!0,d.postMessage({action:"render",frameState:{layerIndex:0,wantedTiles:{},usedTiles:{},viewHints:e.viewHints.slice(0),postRenderFunctions:[],viewState:{center:e.viewState.center.slice(0),resolution:e.viewState.resolution,rotation:e.viewState.rotation,zoom:e.viewState.zoom},pixelRatio:e.pixelRatio,size:e.size.slice(0),extent:e.extent.slice(0),coordinateToPixelTransform:e.coordinateToPixelTransform.slice(0),pixelToCoordinateTransform:e.pixelToCoordinateTransform.slice(0),layerStatesArray:e.layerStatesArray.map((e=>({zIndex:e.zIndex,visible:e.visible,extent:e.extent,maxResolution:e.maxResolution,minResolution:e.minResolution,sourceState:e.sourceState,managed:e.managed})))}})),u},source:new o.A({attributions:['<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a>','<a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>']})})],target:"map",view:new r.Ay({resolutions:(0,c.EN)({tileSize:512}).getResolutions(),center:[0,0],zoom:2})});y.addControl(new s.A),y.on("pointermove",(function(e){if(e.dragging)return;const t=y.getEventPixel(e.originalEvent);d.postMessage({action:"requestFeatures",pixel:t})})),d.addEventListener("message",(e=>{if("loadImage"===e.data.action){const t=new Image;t.crossOrigin="anonymous",t.addEventListener("load",(function(){createImageBitmap(t,0,0,t.width,t.height).then((t=>{d.postMessage({action:"imageLoaded",image:t,src:e.data.src},[t])}))})),t.src=e.data.src}else"getFeatures"===e.data.action?function(e){if(0==e.length)return v.innerText="",void(v.style.opacity=0);const t=e.map((e=>Object.keys(e).filter((e=>!e.includes(":"))).reduce(((t,n)=>(t[n]=e[n],t)),{})));v.innerText=JSON.stringify(t,null,2),v.style.opacity=1}(e.data.features):"requestRender"===e.data.action?y.render():p&&"rendered"===e.data.action&&(requestAnimationFrame((function(){const t=e.data.imageData;p.width=t.width,p.height=t.height,p.getContext("2d").drawImage(t,0,0),p.style.transform=e.data.transform,f=e.data.frameState,h()})),g=!1)}));const v=document.getElementById("info")}},function(e){var t;t=87896,e(e.s=t)}]);
//# sourceMappingURL=offscreen-canvas.js.map